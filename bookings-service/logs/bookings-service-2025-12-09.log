{"@timestamp":"2025-12-09T05:54:10.3793371Z","@version":"1","level":"INFO","message":"Starting BookingsServiceApplication using Java 21.0.6 with PID 19304 (C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service\\target\\classes started by mahalakshmi.gopi in C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T05:54:10.3855552Z","@version":"1","level":"DEBUG","message":"Running with Spring Boot v3.2.0, Spring v6.1.1","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T05:54:10.3876758Z","@version":"1","level":"INFO","message":"No active profile set, falling back to 1 default profile: \"default\"","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T05:54:11.3010732Z","@version":"1","level":"INFO","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T05:54:11.3516733Z","@version":"1","level":"INFO","message":"Finished Spring Data repository scanning in 40 ms. Found 2 JPA repository interfaces.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T05:54:12.8540204Z","@version":"1","level":"INFO","message":"Tomcat initialized with port 8093 (http)","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T05:54:12.8666188Z","@version":"1","level":"INFO","message":"Starting service [Tomcat]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardService"}
{"@timestamp":"2025-12-09T05:54:12.8680181Z","@version":"1","level":"INFO","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardEngine"}
{"@timestamp":"2025-12-09T05:54:12.9707755Z","@version":"1","level":"INFO","message":"Initializing Spring embedded WebApplicationContext","service":"bookings-service","thread":"main","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T05:54:12.9717777Z","@version":"1","level":"INFO","message":"Root WebApplicationContext: initialization completed in 2522 ms","service":"bookings-service","thread":"main","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext"}
{"@timestamp":"2025-12-09T05:54:13.4127696Z","@version":"1","level":"DEBUG","message":"Filter 'correlationIdFilter' configured for use","service":"bookings-service","thread":"main","logger":"c.v.b.filter.CorrelationIdFilter"}
{"@timestamp":"2025-12-09T05:54:13.7299301Z","@version":"1","level":"INFO","message":"HikariPool-1 - Starting...","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T05:54:16.5712247Z","@version":"1","level":"INFO","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6df31abf","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.pool.HikariPool"}
{"@timestamp":"2025-12-09T05:54:16.5732196Z","@version":"1","level":"INFO","message":"HikariPool-1 - Start completed.","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T05:54:16.691296Z","@version":"1","level":"INFO","message":"Database: jdbc:postgresql://dpg-d4pe89muk2gs73dcir30-a.singapore-postgres.render.com:5432/vams_c1jg (PostgreSQL 18.1)","service":"bookings-service","thread":"main","logger":"org.flywaydb.core.FlywayExecutor"}
{"@timestamp":"2025-12-09T05:54:17.2613904Z","@version":"1","level":"WARN","message":"Flyway upgrade recommended: PostgreSQL 18.1 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 16.","service":"bookings-service","thread":"main","logger":"o.f.c.i.database.base.Database"}
{"@timestamp":"2025-12-09T05:54:17.6095831Z","@version":"1","level":"INFO","message":"Successfully validated 2 migrations (execution time 00:00.266s)","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbValidate"}
{"@timestamp":"2025-12-09T05:54:18.1829387Z","@version":"1","level":"INFO","message":"Current version of schema \"public\": 1","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T05:54:18.2284877Z","@version":"1","level":"INFO","message":"Schema \"public\" is up to date. No migration necessary.","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T05:54:18.7918289Z","@version":"1","level":"INFO","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"bookings-service","thread":"main","logger":"o.h.jpa.internal.util.LogHelper"}
{"@timestamp":"2025-12-09T05:54:18.8516947Z","@version":"1","level":"INFO","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"bookings-service","thread":"main","logger":"org.hibernate.Version"}
{"@timestamp":"2025-12-09T05:54:18.8894308Z","@version":"1","level":"INFO","message":"HHH000026: Second-level cache disabled","service":"bookings-service","thread":"main","logger":"o.h.c.i.RegionFactoryInitiator"}
{"@timestamp":"2025-12-09T05:54:19.1262688Z","@version":"1","level":"INFO","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"bookings-service","thread":"main","logger":"o.s.o.j.p.SpringPersistenceUnitInfo"}
{"@timestamp":"2025-12-09T05:54:19.2817204Z","@version":"1","level":"WARN","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"bookings-service","thread":"main","logger":"org.hibernate.orm.deprecation"}
{"@timestamp":"2025-12-09T05:54:20.3379666Z","@version":"1","level":"INFO","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"bookings-service","thread":"main","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator"}
{"@timestamp":"2025-12-09T05:54:22.6755766Z","@version":"1","level":"INFO","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"bookings-service","thread":"main","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean"}
{"@timestamp":"2025-12-09T05:54:23.2072108Z","@version":"1","level":"INFO","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"bookings-service","thread":"main","logger":"o.s.d.j.r.query.QueryEnhancerFactory"}
{"@timestamp":"2025-12-09T05:54:24.5013961Z","@version":"1","level":"WARN","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"bookings-service","thread":"main","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration"}
{"@timestamp":"2025-12-09T05:54:25.9746545Z","@version":"1","level":"INFO","message":"Exposing 2 endpoint(s) beneath base path '/actuator'","service":"bookings-service","thread":"main","logger":"o.s.b.a.e.web.EndpointLinksResolver"}
{"@timestamp":"2025-12-09T05:54:26.1155365Z","@version":"1","level":"INFO","message":"Tomcat started on port 8093 (http) with context path ''","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T05:54:26.1359314Z","@version":"1","level":"INFO","message":"Started BookingsServiceApplication in 16.615 seconds (process running for 17.14)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T05:54:46.2406342Z","@version":"1","level":"INFO","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T05:54:46.2406342Z","@version":"1","level":"INFO","message":"Initializing Servlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T05:54:46.2436257Z","@version":"1","level":"INFO","message":"Completed initialization in 1 ms","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T05:54:46.3528868Z","@version":"1","level":"DEBUG","message":"Creating new booking","traceId":"30f118d5-a71e-48c7-8f42-32df7fd3b6be","correlationId":"30f118d5-a71e-48c7-8f42-32df7fd3b6be","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T05:54:46.4259715Z","@version":"1","level":"WARN","message":"Illegal argument exception: Invalid UUID string: tourist","traceId":"30f118d5-a71e-48c7-8f42-32df7fd3b6be","correlationId":"30f118d5-a71e-48c7-8f42-32df7fd3b6be","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T05:56:03.495347Z","@version":"1","level":"DEBUG","message":"Creating new booking","traceId":"8abd76f4-b1cf-4dd4-ae38-f8e122a26764","correlationId":"8abd76f4-b1cf-4dd4-ae38-f8e122a26764","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T05:56:03.6841266Z","@version":"1","level":"WARN","message":"Illegal argument exception: Invalid UUID string: vfs-london-001","traceId":"8abd76f4-b1cf-4dd4-ae38-f8e122a26764","correlationId":"8abd76f4-b1cf-4dd4-ae38-f8e122a26764","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T06:00:13.722069Z","@version":"1","level":"DEBUG","message":"Creating new booking","traceId":"7000a6e8-1202-4d9f-8e7b-ebfc7de90226","correlationId":"7000a6e8-1202-4d9f-8e7b-ebfc7de90226","service":"bookings-service","thread":"http-nio-8093-exec-6","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T06:00:13.8860355Z","@version":"1","level":"WARN","message":"Illegal argument exception: Invalid UUID string: VAC-GBR-LON","traceId":"7000a6e8-1202-4d9f-8e7b-ebfc7de90226","correlationId":"7000a6e8-1202-4d9f-8e7b-ebfc7de90226","service":"bookings-service","thread":"http-nio-8093-exec-6","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T06:02:04.137575Z","@version":"1","level":"DEBUG","message":"Creating new booking","traceId":"18a26bce-685f-4d58-acd7-09aff285c5d6","correlationId":"18a26bce-685f-4d58-acd7-09aff285c5d6","service":"bookings-service","thread":"http-nio-8093-exec-8","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T06:02:04.2891604Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.application_id,\r\n        a1_0.accommodation_details,\r\n        a1_0.agent_id,\r\n        a1_0.applicant_id,\r\n        a1_0.application_type,\r\n        a1_0.cancellation_reason,\r\n        a1_0.cancelled_by_id,\r\n        a1_0.cancelled_date,\r\n        a1_0.completed_date,\r\n        a1_0.created_by_user_id,\r\n        a1_0.created_by_user_type,\r\n        a1_0.created_date,\r\n        a1_0.currency,\r\n        a1_0.current_step,\r\n        a1_0.destination_country_id,\r\n        a1_0.expiry_date,\r\n        a1_0.form_data_json,\r\n        a1_0.intended_arrival_date,\r\n        a1_0.intended_departure_date,\r\n        a1_0.internal_notes,\r\n        a1_0.is_draft,\r\n        a1_0.paid_amount,\r\n        a1_0.priority,\r\n        a1_0.reference_number,\r\n        a1_0.refunded_amount,\r\n        a1_0.sla_due_date,\r\n        a1_0.status,\r\n        a1_0.sub_status,\r\n        a1_0.submission_date,\r\n        a1_0.total_fee_amount,\r\n        a1_0.total_steps,\r\n        a1_0.travel_purpose,\r\n        a1_0.updated_date,\r\n        a1_0.vac_id,\r\n        a1_0.visa_type_id \r\n    from\r\n        application a1_0 \r\n    where\r\n        a1_0.application_id=?","traceId":"18a26bce-685f-4d58-acd7-09aff285c5d6","correlationId":"18a26bce-685f-4d58-acd7-09aff285c5d6","service":"bookings-service","thread":"http-nio-8093-exec-8","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T06:02:04.5078967Z","@version":"1","level":"WARN","message":"Illegal argument exception: Invalid UUID string: Premium Lounge","traceId":"18a26bce-685f-4d58-acd7-09aff285c5d6","correlationId":"18a26bce-685f-4d58-acd7-09aff285c5d6","service":"bookings-service","thread":"http-nio-8093-exec-8","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T06:02:47.8564593Z","@version":"1","level":"DEBUG","message":"Creating new booking","traceId":"a2ad5683-44ad-4924-86bc-c88c1112d331","correlationId":"a2ad5683-44ad-4924-86bc-c88c1112d331","service":"bookings-service","thread":"http-nio-8093-exec-10","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T06:02:48.0255494Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.application_id,\r\n        a1_0.accommodation_details,\r\n        a1_0.agent_id,\r\n        a1_0.applicant_id,\r\n        a1_0.application_type,\r\n        a1_0.cancellation_reason,\r\n        a1_0.cancelled_by_id,\r\n        a1_0.cancelled_date,\r\n        a1_0.completed_date,\r\n        a1_0.created_by_user_id,\r\n        a1_0.created_by_user_type,\r\n        a1_0.created_date,\r\n        a1_0.currency,\r\n        a1_0.current_step,\r\n        a1_0.destination_country_id,\r\n        a1_0.expiry_date,\r\n        a1_0.form_data_json,\r\n        a1_0.intended_arrival_date,\r\n        a1_0.intended_departure_date,\r\n        a1_0.internal_notes,\r\n        a1_0.is_draft,\r\n        a1_0.paid_amount,\r\n        a1_0.priority,\r\n        a1_0.reference_number,\r\n        a1_0.refunded_amount,\r\n        a1_0.sla_due_date,\r\n        a1_0.status,\r\n        a1_0.sub_status,\r\n        a1_0.submission_date,\r\n        a1_0.total_fee_amount,\r\n        a1_0.total_steps,\r\n        a1_0.travel_purpose,\r\n        a1_0.updated_date,\r\n        a1_0.vac_id,\r\n        a1_0.visa_type_id \r\n    from\r\n        application a1_0 \r\n    where\r\n        a1_0.application_id=?","traceId":"a2ad5683-44ad-4924-86bc-c88c1112d331","correlationId":"a2ad5683-44ad-4924-86bc-c88c1112d331","service":"bookings-service","thread":"http-nio-8093-exec-10","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T06:02:48.222929Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        as1_0.application_service_id,\r\n        as1_0.added_date,\r\n        as1_0.application_id,\r\n        as1_0.completed_date,\r\n        as1_0.quantity,\r\n        as1_0.service_id,\r\n        as1_0.status,\r\n        as1_0.tax_amount,\r\n        as1_0.total_price,\r\n        as1_0.unit_price \r\n    from\r\n        application_service as1_0 \r\n    where\r\n        as1_0.application_service_id=?","traceId":"a2ad5683-44ad-4924-86bc-c88c1112d331","correlationId":"a2ad5683-44ad-4924-86bc-c88c1112d331","service":"bookings-service","thread":"http-nio-8093-exec-10","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T06:02:48.2813497Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        as1_0.application_service_id,\r\n        as1_0.added_date,\r\n        as1_0.application_id,\r\n        as1_0.completed_date,\r\n        as1_0.quantity,\r\n        as1_0.service_id,\r\n        as1_0.status,\r\n        as1_0.tax_amount,\r\n        as1_0.total_price,\r\n        as1_0.unit_price \r\n    from\r\n        application_service as1_0 \r\n    where\r\n        as1_0.application_service_id=?","traceId":"a2ad5683-44ad-4924-86bc-c88c1112d331","correlationId":"a2ad5683-44ad-4924-86bc-c88c1112d331","service":"bookings-service","thread":"http-nio-8093-exec-10","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T06:02:48.6942751Z","@version":"1","level":"DEBUG","message":"\r\n    /* insert for\r\n        com.vfsglobal.bookings.entity.Application */insert \r\n    into\r\n        application (accommodation_details, agent_id, applicant_id, application_type, cancellation_reason, cancelled_by_id, cancelled_date, completed_date, created_by_user_id, created_by_user_type, created_date, currency, current_step, destination_country_id, expiry_date, form_data_json, intended_arrival_date, intended_departure_date, internal_notes, is_draft, paid_amount, priority, reference_number, refunded_amount, sla_due_date, status, sub_status, submission_date, total_fee_amount, total_steps, travel_purpose, updated_date, vac_id, visa_type_id, application_id) \r\n    values\r\n        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","traceId":"a2ad5683-44ad-4924-86bc-c88c1112d331","correlationId":"a2ad5683-44ad-4924-86bc-c88c1112d331","service":"bookings-service","thread":"http-nio-8093-exec-10","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T06:02:48.8106925Z","@version":"1","level":"WARN","message":"SQL Error: 0, SQLState: 42804","traceId":"a2ad5683-44ad-4924-86bc-c88c1112d331","correlationId":"a2ad5683-44ad-4924-86bc-c88c1112d331","service":"bookings-service","thread":"http-nio-8093-exec-10","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T06:02:48.8116881Z","@version":"1","level":"ERROR","message":"ERROR: column \"status\" is of type application_status but expression is of type character varying\n  Hint: You will need to rewrite or cast the expression.\n  Position: 699","traceId":"a2ad5683-44ad-4924-86bc-c88c1112d331","correlationId":"a2ad5683-44ad-4924-86bc-c88c1112d331","service":"bookings-service","thread":"http-nio-8093-exec-10","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T06:02:48.8743504Z","@version":"1","level":"ERROR","message":"Runtime exception occurred","traceId":"a2ad5683-44ad-4924-86bc-c88c1112d331","correlationId":"a2ad5683-44ad-4924-86bc-c88c1112d331","stack_trace":"org.springframework.dao.InvalidDataAccessResourceUsageException: could not execute statement [ERROR: column \"status\" is of type application_status but expression is of type character varying\n  Hint: You will need to rewrite or cast the expression.\n  Position: 699] [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\r\n\tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n\tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy161.findByApplicationId(Unknown Source)\r\n\tat com.vfsglobal.bookings.service.BookingService.mapToBookingResponse(BookingService.java:136)\r\n\tat com.vfsglobal.bookings.service.BookingService.createBooking(BookingService.java:63)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat com.vfsglobal.bookings.service.BookingService$$SpringCGLIB$$0.createBooking(<generated>)\r\n\tat com.vfsglobal.bookings.controller.BookingController.createBooking(BookingController.java:28)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat com.vfsglobal.bookings.filter.CorrelationIdFilter.doFilterInternal(CorrelationIdFilter.java:58)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.exception.SQLGrammarException: could not execute statement [ERROR: column \"status\" is of type application_status but expression is of type character varying\n  Hint: You will need to rewrite or cast the expression.\n  Position: 699] [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:91)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:283)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:107)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:40)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:52)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:171)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2865)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:102)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:631)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:55)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1378)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:107)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:305)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:246)\r\n\tat org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)\r\n\tat org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)\r\n\tat org.hibernate.query.Query.getResultList(Query.java:120)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n\t... 79 common frames omitted\r\nCaused by: org.postgresql.util.PSQLException: ERROR: column \"status\" is of type application_status but expression is of type character varying\n  Hint: You will need to rewrite or cast the expression.\n  Position: 699\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:190)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:152)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:280)\r\n\t... 114 common frames omitted\r\n","service":"bookings-service","thread":"http-nio-8093-exec-10","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T06:25:11.1502239Z","@version":"1","level":"DEBUG","message":"Creating new booking","traceId":"8ee14741-e15e-43c8-9109-d0d82fa6d82d","correlationId":"8ee14741-e15e-43c8-9109-d0d82fa6d82d","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T06:25:11.1947099Z","@version":"1","level":"ERROR","message":"Runtime exception occurred","traceId":"8ee14741-e15e-43c8-9109-d0d82fa6d82d","correlationId":"8ee14741-e15e-43c8-9109-d0d82fa6d82d","stack_trace":"java.lang.NullPointerException: Cannot invoke \"String.length()\" because \"name\" is null\r\n\tat java.base/java.util.UUID.fromString(UUID.java:239)\r\n\tat com.vfsglobal.bookings.service.BookingService.createBooking(BookingService.java:37)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat com.vfsglobal.bookings.service.BookingService$$SpringCGLIB$$0.createBooking(<generated>)\r\n\tat com.vfsglobal.bookings.controller.BookingController.createBooking(BookingController.java:28)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat com.vfsglobal.bookings.filter.CorrelationIdFilter.doFilterInternal(CorrelationIdFilter.java:58)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T06:26:43.6324649Z","@version":"1","level":"INFO","message":"Starting BookingsServiceApplication using Java 21.0.6 with PID 17504 (C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service\\target\\classes started by mahalakshmi.gopi in C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T06:26:43.6414453Z","@version":"1","level":"DEBUG","message":"Running with Spring Boot v3.2.0, Spring v6.1.1","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T06:26:43.6424416Z","@version":"1","level":"INFO","message":"No active profile set, falling back to 1 default profile: \"default\"","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T06:26:44.3613559Z","@version":"1","level":"INFO","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T06:26:44.4102872Z","@version":"1","level":"INFO","message":"Finished Spring Data repository scanning in 43 ms. Found 2 JPA repository interfaces.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T06:26:45.6750462Z","@version":"1","level":"INFO","message":"Tomcat initialized with port 8093 (http)","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T06:26:45.684662Z","@version":"1","level":"INFO","message":"Starting service [Tomcat]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardService"}
{"@timestamp":"2025-12-09T06:26:45.6857418Z","@version":"1","level":"INFO","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardEngine"}
{"@timestamp":"2025-12-09T06:26:45.7662524Z","@version":"1","level":"INFO","message":"Initializing Spring embedded WebApplicationContext","service":"bookings-service","thread":"main","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T06:26:45.7662524Z","@version":"1","level":"INFO","message":"Root WebApplicationContext: initialization completed in 2073 ms","service":"bookings-service","thread":"main","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext"}
{"@timestamp":"2025-12-09T06:26:46.0057188Z","@version":"1","level":"DEBUG","message":"Filter 'correlationIdFilter' configured for use","service":"bookings-service","thread":"main","logger":"c.v.b.filter.CorrelationIdFilter"}
{"@timestamp":"2025-12-09T06:26:46.2315155Z","@version":"1","level":"INFO","message":"HikariPool-1 - Starting...","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T06:26:48.3521704Z","@version":"1","level":"INFO","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@414e8b31","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.pool.HikariPool"}
{"@timestamp":"2025-12-09T06:26:48.3541641Z","@version":"1","level":"INFO","message":"HikariPool-1 - Start completed.","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T06:26:48.4853393Z","@version":"1","level":"INFO","message":"Database: jdbc:postgresql://dpg-d4pe89muk2gs73dcir30-a.singapore-postgres.render.com:5432/vams_c1jg (PostgreSQL 18.1)","service":"bookings-service","thread":"main","logger":"org.flywaydb.core.FlywayExecutor"}
{"@timestamp":"2025-12-09T06:26:48.8097632Z","@version":"1","level":"WARN","message":"Flyway upgrade recommended: PostgreSQL 18.1 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 16.","service":"bookings-service","thread":"main","logger":"o.f.c.i.database.base.Database"}
{"@timestamp":"2025-12-09T06:26:49.0778106Z","@version":"1","level":"INFO","message":"Successfully validated 2 migrations (execution time 00:00.208s)","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbValidate"}
{"@timestamp":"2025-12-09T06:26:49.6461422Z","@version":"1","level":"INFO","message":"Current version of schema \"public\": 1","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T06:26:49.6990515Z","@version":"1","level":"INFO","message":"Schema \"public\" is up to date. No migration necessary.","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T06:26:50.0870897Z","@version":"1","level":"INFO","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"bookings-service","thread":"main","logger":"o.h.jpa.internal.util.LogHelper"}
{"@timestamp":"2025-12-09T06:26:50.1480923Z","@version":"1","level":"INFO","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"bookings-service","thread":"main","logger":"org.hibernate.Version"}
{"@timestamp":"2025-12-09T06:26:50.184883Z","@version":"1","level":"INFO","message":"HHH000026: Second-level cache disabled","service":"bookings-service","thread":"main","logger":"o.h.c.i.RegionFactoryInitiator"}
{"@timestamp":"2025-12-09T06:26:50.4006262Z","@version":"1","level":"INFO","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"bookings-service","thread":"main","logger":"o.s.o.j.p.SpringPersistenceUnitInfo"}
{"@timestamp":"2025-12-09T06:26:50.4972851Z","@version":"1","level":"WARN","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"bookings-service","thread":"main","logger":"org.hibernate.orm.deprecation"}
{"@timestamp":"2025-12-09T06:26:51.4471196Z","@version":"1","level":"INFO","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"bookings-service","thread":"main","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator"}
{"@timestamp":"2025-12-09T06:26:53.1330643Z","@version":"1","level":"INFO","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"bookings-service","thread":"main","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean"}
{"@timestamp":"2025-12-09T06:26:53.4833284Z","@version":"1","level":"INFO","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"bookings-service","thread":"main","logger":"o.s.d.j.r.query.QueryEnhancerFactory"}
{"@timestamp":"2025-12-09T06:26:54.311987Z","@version":"1","level":"WARN","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"bookings-service","thread":"main","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration"}
{"@timestamp":"2025-12-09T06:26:55.3623Z","@version":"1","level":"INFO","message":"Exposing 2 endpoint(s) beneath base path '/actuator'","service":"bookings-service","thread":"main","logger":"o.s.b.a.e.web.EndpointLinksResolver"}
{"@timestamp":"2025-12-09T06:26:55.4598007Z","@version":"1","level":"INFO","message":"Tomcat started on port 8093 (http) with context path ''","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T06:26:55.4741195Z","@version":"1","level":"INFO","message":"Started BookingsServiceApplication in 12.553 seconds (process running for 12.98)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T06:27:15.0360897Z","@version":"1","level":"INFO","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T06:27:15.0420722Z","@version":"1","level":"INFO","message":"Initializing Servlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T06:27:15.0440663Z","@version":"1","level":"INFO","message":"Completed initialization in 2 ms","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T06:27:15.1229961Z","@version":"1","level":"DEBUG","message":"Creating new booking","traceId":"d562a55a-287f-4ba4-bd54-67b26d5a001c","correlationId":"d562a55a-287f-4ba4-bd54-67b26d5a001c","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T06:27:15.2159786Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.application_id,\r\n        a1_0.accommodation_details,\r\n        a1_0.agent_id,\r\n        a1_0.applicant_id,\r\n        a1_0.application_type,\r\n        a1_0.cancellation_reason,\r\n        a1_0.cancelled_by_id,\r\n        a1_0.cancelled_date,\r\n        a1_0.completed_date,\r\n        a1_0.created_by_user_id,\r\n        a1_0.created_by_user_type,\r\n        a1_0.created_date,\r\n        a1_0.currency,\r\n        a1_0.current_step,\r\n        a1_0.destination_country_id,\r\n        a1_0.expiry_date,\r\n        a1_0.form_data_json,\r\n        a1_0.intended_arrival_date,\r\n        a1_0.intended_departure_date,\r\n        a1_0.internal_notes,\r\n        a1_0.is_draft,\r\n        a1_0.paid_amount,\r\n        a1_0.priority,\r\n        a1_0.reference_number,\r\n        a1_0.refunded_amount,\r\n        a1_0.sla_due_date,\r\n        a1_0.status,\r\n        a1_0.sub_status,\r\n        a1_0.submission_date,\r\n        a1_0.total_fee_amount,\r\n        a1_0.total_steps,\r\n        a1_0.travel_purpose,\r\n        a1_0.updated_date,\r\n        a1_0.vac_id,\r\n        a1_0.visa_type_id \r\n    from\r\n        application a1_0 \r\n    where\r\n        a1_0.application_id=?","traceId":"d562a55a-287f-4ba4-bd54-67b26d5a001c","correlationId":"d562a55a-287f-4ba4-bd54-67b26d5a001c","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T06:27:15.2842234Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        as1_0.application_service_id,\r\n        as1_0.added_date,\r\n        as1_0.application_id,\r\n        as1_0.completed_date,\r\n        as1_0.quantity,\r\n        as1_0.service_id,\r\n        as1_0.status,\r\n        as1_0.tax_amount,\r\n        as1_0.total_price,\r\n        as1_0.unit_price \r\n    from\r\n        application_service as1_0 \r\n    where\r\n        as1_0.application_service_id=?","traceId":"d562a55a-287f-4ba4-bd54-67b26d5a001c","correlationId":"d562a55a-287f-4ba4-bd54-67b26d5a001c","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T06:27:15.4247184Z","@version":"1","level":"DEBUG","message":"\r\n    /* insert for\r\n        com.vfsglobal.bookings.entity.Application */insert \r\n    into\r\n        application (accommodation_details, agent_id, applicant_id, application_type, cancellation_reason, cancelled_by_id, cancelled_date, completed_date, created_by_user_id, created_by_user_type, created_date, currency, current_step, destination_country_id, expiry_date, form_data_json, intended_arrival_date, intended_departure_date, internal_notes, is_draft, paid_amount, priority, reference_number, refunded_amount, sla_due_date, status, sub_status, submission_date, total_fee_amount, total_steps, travel_purpose, updated_date, vac_id, visa_type_id, application_id) \r\n    values\r\n        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","traceId":"d562a55a-287f-4ba4-bd54-67b26d5a001c","correlationId":"d562a55a-287f-4ba4-bd54-67b26d5a001c","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T06:27:15.4848162Z","@version":"1","level":"WARN","message":"SQL Error: 0, SQLState: 42804","traceId":"d562a55a-287f-4ba4-bd54-67b26d5a001c","correlationId":"d562a55a-287f-4ba4-bd54-67b26d5a001c","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T06:27:15.4848162Z","@version":"1","level":"ERROR","message":"ERROR: column \"status\" is of type application_status but expression is of type character varying\n  Hint: You will need to rewrite or cast the expression.\n  Position: 699","traceId":"d562a55a-287f-4ba4-bd54-67b26d5a001c","correlationId":"d562a55a-287f-4ba4-bd54-67b26d5a001c","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T06:27:15.5453943Z","@version":"1","level":"ERROR","message":"Runtime exception occurred","traceId":"d562a55a-287f-4ba4-bd54-67b26d5a001c","correlationId":"d562a55a-287f-4ba4-bd54-67b26d5a001c","stack_trace":"org.springframework.dao.InvalidDataAccessResourceUsageException: could not execute statement [ERROR: column \"status\" is of type application_status but expression is of type character varying\n  Hint: You will need to rewrite or cast the expression.\n  Position: 699] [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\r\n\tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n\tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy161.findByApplicationId(Unknown Source)\r\n\tat com.vfsglobal.bookings.service.BookingService.mapToBookingResponse(BookingService.java:145)\r\n\tat com.vfsglobal.bookings.service.BookingService.createBooking(BookingService.java:71)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat com.vfsglobal.bookings.service.BookingService$$SpringCGLIB$$0.createBooking(<generated>)\r\n\tat com.vfsglobal.bookings.controller.BookingController.createBooking(BookingController.java:28)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat com.vfsglobal.bookings.filter.CorrelationIdFilter.doFilterInternal(CorrelationIdFilter.java:58)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.exception.SQLGrammarException: could not execute statement [ERROR: column \"status\" is of type application_status but expression is of type character varying\n  Hint: You will need to rewrite or cast the expression.\n  Position: 699] [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:91)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:283)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:107)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:40)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:52)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:171)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2865)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:102)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:631)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:55)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1378)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:107)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:305)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:246)\r\n\tat org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)\r\n\tat org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)\r\n\tat org.hibernate.query.Query.getResultList(Query.java:120)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n\t... 79 common frames omitted\r\nCaused by: org.postgresql.util.PSQLException: ERROR: column \"status\" is of type application_status but expression is of type character varying\n  Hint: You will need to rewrite or cast the expression.\n  Position: 699\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:190)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:152)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:280)\r\n\t... 114 common frames omitted\r\n","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T12:34:27.3381816Z","@version":"1","level":"INFO","message":"Starting BookingsServiceApplication using Java 21.0.6 with PID 14772 (C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service\\target\\classes started by mahalakshmi.gopi in C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T12:34:27.3426853Z","@version":"1","level":"DEBUG","message":"Running with Spring Boot v3.2.0, Spring v6.1.1","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T12:34:27.3446864Z","@version":"1","level":"INFO","message":"No active profile set, falling back to 1 default profile: \"default\"","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T12:34:28.2806227Z","@version":"1","level":"INFO","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T12:34:28.327078Z","@version":"1","level":"INFO","message":"Finished Spring Data repository scanning in 40 ms. Found 2 JPA repository interfaces.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T12:34:29.8829483Z","@version":"1","level":"INFO","message":"Tomcat initialized with port 8093 (http)","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T12:34:29.8949925Z","@version":"1","level":"INFO","message":"Starting service [Tomcat]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardService"}
{"@timestamp":"2025-12-09T12:34:29.8949925Z","@version":"1","level":"INFO","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardEngine"}
{"@timestamp":"2025-12-09T12:34:30.0097875Z","@version":"1","level":"INFO","message":"Initializing Spring embedded WebApplicationContext","service":"bookings-service","thread":"main","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T12:34:30.0097875Z","@version":"1","level":"INFO","message":"Root WebApplicationContext: initialization completed in 2605 ms","service":"bookings-service","thread":"main","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext"}
{"@timestamp":"2025-12-09T12:34:30.3067415Z","@version":"1","level":"DEBUG","message":"Filter 'correlationIdFilter' configured for use","service":"bookings-service","thread":"main","logger":"c.v.b.filter.CorrelationIdFilter"}
{"@timestamp":"2025-12-09T12:34:30.5821145Z","@version":"1","level":"INFO","message":"HikariPool-1 - Starting...","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T12:34:31.7430423Z","@version":"1","level":"INFO","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@121dce2","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.pool.HikariPool"}
{"@timestamp":"2025-12-09T12:34:31.7439532Z","@version":"1","level":"INFO","message":"HikariPool-1 - Start completed.","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T12:34:31.8799946Z","@version":"1","level":"INFO","message":"Database: jdbc:postgresql://dpg-d4pe89muk2gs73dcir30-a.singapore-postgres.render.com:5432/vams_c1jg (PostgreSQL 18.1)","service":"bookings-service","thread":"main","logger":"org.flywaydb.core.FlywayExecutor"}
{"@timestamp":"2025-12-09T12:34:32.1841104Z","@version":"1","level":"WARN","message":"Flyway upgrade recommended: PostgreSQL 18.1 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 16.","service":"bookings-service","thread":"main","logger":"o.f.c.i.database.base.Database"}
{"@timestamp":"2025-12-09T12:34:32.4431842Z","@version":"1","level":"INFO","message":"Successfully validated 2 migrations (execution time 00:00.206s)","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbValidate"}
{"@timestamp":"2025-12-09T12:34:34.046096Z","@version":"1","level":"INFO","message":"Current version of schema \"public\": 1","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T12:34:34.0928089Z","@version":"1","level":"INFO","message":"Schema \"public\" is up to date. No migration necessary.","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T12:34:34.7128104Z","@version":"1","level":"INFO","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"bookings-service","thread":"main","logger":"o.h.jpa.internal.util.LogHelper"}
{"@timestamp":"2025-12-09T12:34:34.8144105Z","@version":"1","level":"INFO","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"bookings-service","thread":"main","logger":"org.hibernate.Version"}
{"@timestamp":"2025-12-09T12:34:34.8729934Z","@version":"1","level":"INFO","message":"HHH000026: Second-level cache disabled","service":"bookings-service","thread":"main","logger":"o.h.c.i.RegionFactoryInitiator"}
{"@timestamp":"2025-12-09T12:34:35.2508795Z","@version":"1","level":"INFO","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"bookings-service","thread":"main","logger":"o.s.o.j.p.SpringPersistenceUnitInfo"}
{"@timestamp":"2025-12-09T12:34:35.4899844Z","@version":"1","level":"WARN","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"bookings-service","thread":"main","logger":"org.hibernate.orm.deprecation"}
{"@timestamp":"2025-12-09T12:34:36.821093Z","@version":"1","level":"INFO","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"bookings-service","thread":"main","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator"}
{"@timestamp":"2025-12-09T12:34:38.4933771Z","@version":"1","level":"INFO","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"bookings-service","thread":"main","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean"}
{"@timestamp":"2025-12-09T12:34:39.0257614Z","@version":"1","level":"INFO","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"bookings-service","thread":"main","logger":"o.s.d.j.r.query.QueryEnhancerFactory"}
{"@timestamp":"2025-12-09T12:34:40.3026014Z","@version":"1","level":"WARN","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"bookings-service","thread":"main","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration"}
{"@timestamp":"2025-12-09T12:34:41.9827164Z","@version":"1","level":"INFO","message":"Exposing 2 endpoint(s) beneath base path '/actuator'","service":"bookings-service","thread":"main","logger":"o.s.b.a.e.web.EndpointLinksResolver"}
{"@timestamp":"2025-12-09T12:34:42.1647211Z","@version":"1","level":"INFO","message":"Tomcat started on port 8093 (http) with context path ''","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T12:34:42.1932447Z","@version":"1","level":"INFO","message":"Started BookingsServiceApplication in 15.769 seconds (process running for 16.357)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T12:34:43.4266494Z","@version":"1","level":"INFO","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T12:34:43.4276077Z","@version":"1","level":"INFO","message":"Initializing Servlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T12:34:43.4301259Z","@version":"1","level":"INFO","message":"Completed initialization in 3 ms","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T12:34:43.5144429Z","@version":"1","level":"DEBUG","message":"Creating new booking","traceId":"cead9c14-e984-400e-b015-8dbd6abdbc10","correlationId":"cead9c14-e984-400e-b015-8dbd6abdbc10","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T12:34:43.6372602Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.application_id,\r\n        a1_0.accommodation_details,\r\n        a1_0.agent_id,\r\n        a1_0.applicant_id,\r\n        a1_0.application_type,\r\n        a1_0.cancellation_reason,\r\n        a1_0.cancelled_by_id,\r\n        a1_0.cancelled_date,\r\n        a1_0.completed_date,\r\n        a1_0.created_by_user_id,\r\n        a1_0.created_by_user_type,\r\n        a1_0.created_date,\r\n        a1_0.currency,\r\n        a1_0.current_step,\r\n        a1_0.destination_country_id,\r\n        a1_0.expiry_date,\r\n        a1_0.form_data_json,\r\n        a1_0.intended_arrival_date,\r\n        a1_0.intended_departure_date,\r\n        a1_0.internal_notes,\r\n        a1_0.is_draft,\r\n        a1_0.paid_amount,\r\n        a1_0.priority,\r\n        a1_0.reference_number,\r\n        a1_0.refunded_amount,\r\n        a1_0.sla_due_date,\r\n        a1_0.status,\r\n        a1_0.sub_status,\r\n        a1_0.submission_date,\r\n        a1_0.total_fee_amount,\r\n        a1_0.total_steps,\r\n        a1_0.travel_purpose,\r\n        a1_0.updated_date,\r\n        a1_0.vac_id,\r\n        a1_0.visa_type_id \r\n    from\r\n        application a1_0 \r\n    where\r\n        a1_0.application_id=?","traceId":"cead9c14-e984-400e-b015-8dbd6abdbc10","correlationId":"cead9c14-e984-400e-b015-8dbd6abdbc10","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T12:34:43.7109678Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        as1_0.application_service_id,\r\n        as1_0.added_date,\r\n        as1_0.application_id,\r\n        as1_0.completed_date,\r\n        as1_0.quantity,\r\n        as1_0.service_id,\r\n        as1_0.status,\r\n        as1_0.tax_amount,\r\n        as1_0.total_price,\r\n        as1_0.unit_price \r\n    from\r\n        application_service as1_0 \r\n    where\r\n        as1_0.application_service_id=?","traceId":"cead9c14-e984-400e-b015-8dbd6abdbc10","correlationId":"cead9c14-e984-400e-b015-8dbd6abdbc10","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T12:34:43.8700529Z","@version":"1","level":"DEBUG","message":"\r\n    /* insert for\r\n        com.vfsglobal.bookings.entity.Application */insert \r\n    into\r\n        application (accommodation_details, agent_id, applicant_id, application_type, cancellation_reason, cancelled_by_id, cancelled_date, completed_date, created_by_user_id, created_by_user_type, created_date, currency, current_step, destination_country_id, expiry_date, form_data_json, intended_arrival_date, intended_departure_date, internal_notes, is_draft, paid_amount, priority, reference_number, refunded_amount, sla_due_date, status, sub_status, submission_date, total_fee_amount, total_steps, travel_purpose, updated_date, vac_id, visa_type_id, application_id) \r\n    values\r\n        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","traceId":"cead9c14-e984-400e-b015-8dbd6abdbc10","correlationId":"cead9c14-e984-400e-b015-8dbd6abdbc10","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T12:34:43.9304045Z","@version":"1","level":"WARN","message":"SQL Error: 0, SQLState: 42804","traceId":"cead9c14-e984-400e-b015-8dbd6abdbc10","correlationId":"cead9c14-e984-400e-b015-8dbd6abdbc10","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T12:34:43.9304045Z","@version":"1","level":"ERROR","message":"ERROR: column \"status\" is of type application_status but expression is of type character varying\n  Hint: You will need to rewrite or cast the expression.\n  Position: 699","traceId":"cead9c14-e984-400e-b015-8dbd6abdbc10","correlationId":"cead9c14-e984-400e-b015-8dbd6abdbc10","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T12:34:44.0001043Z","@version":"1","level":"ERROR","message":"Runtime exception occurred","traceId":"cead9c14-e984-400e-b015-8dbd6abdbc10","correlationId":"cead9c14-e984-400e-b015-8dbd6abdbc10","stack_trace":"org.springframework.dao.InvalidDataAccessResourceUsageException: could not execute statement [ERROR: column \"status\" is of type application_status but expression is of type character varying\n  Hint: You will need to rewrite or cast the expression.\n  Position: 699] [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\r\n\tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n\tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy161.findByApplicationId(Unknown Source)\r\n\tat com.vfsglobal.bookings.service.BookingService.mapToBookingResponse(BookingService.java:145)\r\n\tat com.vfsglobal.bookings.service.BookingService.createBooking(BookingService.java:71)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat com.vfsglobal.bookings.service.BookingService$$SpringCGLIB$$0.createBooking(<generated>)\r\n\tat com.vfsglobal.bookings.controller.BookingController.createBooking(BookingController.java:28)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat com.vfsglobal.bookings.filter.CorrelationIdFilter.doFilterInternal(CorrelationIdFilter.java:58)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.exception.SQLGrammarException: could not execute statement [ERROR: column \"status\" is of type application_status but expression is of type character varying\n  Hint: You will need to rewrite or cast the expression.\n  Position: 699] [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:91)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:283)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:107)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:40)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:52)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:171)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2865)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:102)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:631)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:55)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1378)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:107)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:305)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:246)\r\n\tat org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)\r\n\tat org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)\r\n\tat org.hibernate.query.Query.getResultList(Query.java:120)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n\t... 79 common frames omitted\r\nCaused by: org.postgresql.util.PSQLException: ERROR: column \"status\" is of type application_status but expression is of type character varying\n  Hint: You will need to rewrite or cast the expression.\n  Position: 699\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:190)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:152)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:280)\r\n\t... 114 common frames omitted\r\n","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T12:52:43.689478Z","@version":"1","level":"INFO","message":"Starting BookingsServiceApplication using Java 21.0.6 with PID 16520 (C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service\\target\\classes started by mahalakshmi.gopi in C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T12:52:43.6961903Z","@version":"1","level":"DEBUG","message":"Running with Spring Boot v3.2.0, Spring v6.1.1","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T12:52:43.6971902Z","@version":"1","level":"INFO","message":"No active profile set, falling back to 1 default profile: \"default\"","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T12:52:44.4452386Z","@version":"1","level":"INFO","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T12:52:44.4966916Z","@version":"1","level":"INFO","message":"Finished Spring Data repository scanning in 44 ms. Found 2 JPA repository interfaces.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T12:52:45.8619306Z","@version":"1","level":"INFO","message":"Tomcat initialized with port 8093 (http)","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T12:52:45.872031Z","@version":"1","level":"INFO","message":"Starting service [Tomcat]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardService"}
{"@timestamp":"2025-12-09T12:52:45.872031Z","@version":"1","level":"INFO","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardEngine"}
{"@timestamp":"2025-12-09T12:52:45.972539Z","@version":"1","level":"INFO","message":"Initializing Spring embedded WebApplicationContext","service":"bookings-service","thread":"main","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T12:52:45.972539Z","@version":"1","level":"INFO","message":"Root WebApplicationContext: initialization completed in 2220 ms","service":"bookings-service","thread":"main","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext"}
{"@timestamp":"2025-12-09T12:52:46.2150859Z","@version":"1","level":"DEBUG","message":"Filter 'correlationIdFilter' configured for use","service":"bookings-service","thread":"main","logger":"c.v.b.filter.CorrelationIdFilter"}
{"@timestamp":"2025-12-09T12:52:46.450648Z","@version":"1","level":"INFO","message":"HikariPool-1 - Starting...","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T12:52:48.6545729Z","@version":"1","level":"INFO","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@75f65d54","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.pool.HikariPool"}
{"@timestamp":"2025-12-09T12:52:48.6555724Z","@version":"1","level":"INFO","message":"HikariPool-1 - Start completed.","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T12:52:48.8028265Z","@version":"1","level":"INFO","message":"Database: jdbc:postgresql://dpg-d4pe89muk2gs73dcir30-a.singapore-postgres.render.com:5432/vams_c1jg (PostgreSQL 18.1)","service":"bookings-service","thread":"main","logger":"org.flywaydb.core.FlywayExecutor"}
{"@timestamp":"2025-12-09T12:52:49.1373312Z","@version":"1","level":"WARN","message":"Flyway upgrade recommended: PostgreSQL 18.1 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 16.","service":"bookings-service","thread":"main","logger":"o.f.c.i.database.base.Database"}
{"@timestamp":"2025-12-09T12:52:49.4557145Z","@version":"1","level":"INFO","message":"Successfully validated 2 migrations (execution time 00:00.221s)","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbValidate"}
{"@timestamp":"2025-12-09T12:52:50.8786237Z","@version":"1","level":"INFO","message":"Current version of schema \"public\": 1","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T12:52:50.9263108Z","@version":"1","level":"INFO","message":"Schema \"public\" is up to date. No migration necessary.","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T12:52:51.4283771Z","@version":"1","level":"INFO","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"bookings-service","thread":"main","logger":"o.h.jpa.internal.util.LogHelper"}
{"@timestamp":"2025-12-09T12:52:51.4860795Z","@version":"1","level":"INFO","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"bookings-service","thread":"main","logger":"org.hibernate.Version"}
{"@timestamp":"2025-12-09T12:52:51.5292702Z","@version":"1","level":"INFO","message":"HHH000026: Second-level cache disabled","service":"bookings-service","thread":"main","logger":"o.h.c.i.RegionFactoryInitiator"}
{"@timestamp":"2025-12-09T12:52:51.7752999Z","@version":"1","level":"INFO","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"bookings-service","thread":"main","logger":"o.s.o.j.p.SpringPersistenceUnitInfo"}
{"@timestamp":"2025-12-09T12:52:51.930783Z","@version":"1","level":"WARN","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"bookings-service","thread":"main","logger":"org.hibernate.orm.deprecation"}
{"@timestamp":"2025-12-09T12:52:52.8542897Z","@version":"1","level":"INFO","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"bookings-service","thread":"main","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator"}
{"@timestamp":"2025-12-09T12:52:54.8651715Z","@version":"1","level":"ERROR","message":"Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: wrong column type encountered in column [status] in table [application]; found [application_status (Types#VARCHAR)], but expecting [applicationstatus (Types#NAMED_ENUM)]","service":"bookings-service","thread":"main","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean"}
{"@timestamp":"2025-12-09T12:52:54.8661502Z","@version":"1","level":"WARN","message":"Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: wrong column type encountered in column [status] in table [application]; found [application_status (Types#VARCHAR)], but expecting [applicationstatus (Types#NAMED_ENUM)]","service":"bookings-service","thread":"main","logger":"o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext"}
{"@timestamp":"2025-12-09T12:52:54.8661502Z","@version":"1","level":"INFO","message":"HikariPool-1 - Shutdown initiated...","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T12:53:11.9515164Z","@version":"1","level":"INFO","message":"HikariPool-1 - Shutdown completed.","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T12:53:11.954516Z","@version":"1","level":"INFO","message":"Stopping service [Tomcat]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardService"}
{"@timestamp":"2025-12-09T12:53:12.0647834Z","@version":"1","level":"INFO","message":"\r\n\r\nError starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.","service":"bookings-service","thread":"main","logger":"o.s.b.a.l.ConditionEvaluationReportLogger"}
{"@timestamp":"2025-12-09T12:53:12.0907365Z","@version":"1","level":"ERROR","message":"Application run failed","stack_trace":"org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: wrong column type encountered in column [status] in table [application]; found [application_status (Types#VARCHAR)], but expecting [applicationstatus (Types#NAMED_ENUM)]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:323)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)\r\n\tat com.vfsglobal.bookings.BookingsServiceApplication.main(BookingsServiceApplication.java:12)\r\nCaused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: wrong column type encountered in column [status] in table [application]; found [application_status (Types#VARCHAR)], but expecting [applicationstatus (Types#NAMED_ENUM)]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)\r\n\t... 16 common frames omitted\r\nCaused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: wrong column type encountered in column [status] in table [application]; found [application_status (Types#VARCHAR)], but expecting [applicationstatus (Types#NAMED_ENUM)]\r\n\tat org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateColumnType(AbstractSchemaValidator.java:165)\r\n\tat org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:152)\r\n\tat org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)\r\n\tat org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)\r\n\tat org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)\r\n\tat java.base/java.util.HashMap.forEach(HashMap.java:1429)\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)\r\n\tat org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)\r\n\tat org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)\r\n\tat org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)\r\n\tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)\r\n\t... 20 common frames omitted\r\n","service":"bookings-service","thread":"main","logger":"o.s.boot.SpringApplication"}
{"@timestamp":"2025-12-09T13:11:17.5113009Z","@version":"1","level":"INFO","message":"Starting BookingsServiceApplication using Java 21.0.6 with PID 24024 (C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service\\target\\classes started by mahalakshmi.gopi in C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:11:17.5172999Z","@version":"1","level":"DEBUG","message":"Running with Spring Boot v3.2.0, Spring v6.1.1","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:11:17.5182991Z","@version":"1","level":"INFO","message":"No active profile set, falling back to 1 default profile: \"default\"","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:11:18.2441834Z","@version":"1","level":"INFO","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T13:11:18.292966Z","@version":"1","level":"INFO","message":"Finished Spring Data repository scanning in 42 ms. Found 2 JPA repository interfaces.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T13:11:19.6779689Z","@version":"1","level":"INFO","message":"Tomcat initialized with port 8093 (http)","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T13:11:19.6889678Z","@version":"1","level":"INFO","message":"Starting service [Tomcat]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardService"}
{"@timestamp":"2025-12-09T13:11:19.6889678Z","@version":"1","level":"INFO","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardEngine"}
{"@timestamp":"2025-12-09T13:11:19.7944741Z","@version":"1","level":"INFO","message":"Initializing Spring embedded WebApplicationContext","service":"bookings-service","thread":"main","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T13:11:19.7944741Z","@version":"1","level":"INFO","message":"Root WebApplicationContext: initialization completed in 2214 ms","service":"bookings-service","thread":"main","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext"}
{"@timestamp":"2025-12-09T13:11:20.0461711Z","@version":"1","level":"DEBUG","message":"Filter 'correlationIdFilter' configured for use","service":"bookings-service","thread":"main","logger":"c.v.b.filter.CorrelationIdFilter"}
{"@timestamp":"2025-12-09T13:11:20.3151258Z","@version":"1","level":"INFO","message":"HikariPool-1 - Starting...","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T13:11:21.5790299Z","@version":"1","level":"INFO","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2cacd55e","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.pool.HikariPool"}
{"@timestamp":"2025-12-09T13:11:21.57995Z","@version":"1","level":"INFO","message":"HikariPool-1 - Start completed.","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T13:11:21.701268Z","@version":"1","level":"INFO","message":"Database: jdbc:postgresql://dpg-d4pe89muk2gs73dcir30-a.singapore-postgres.render.com:5432/vams_c1jg (PostgreSQL 18.1)","service":"bookings-service","thread":"main","logger":"org.flywaydb.core.FlywayExecutor"}
{"@timestamp":"2025-12-09T13:11:22.0164679Z","@version":"1","level":"WARN","message":"Flyway upgrade recommended: PostgreSQL 18.1 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 16.","service":"bookings-service","thread":"main","logger":"o.f.c.i.database.base.Database"}
{"@timestamp":"2025-12-09T13:11:22.2850222Z","@version":"1","level":"INFO","message":"Successfully validated 2 migrations (execution time 00:00.206s)","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbValidate"}
{"@timestamp":"2025-12-09T13:11:22.8230486Z","@version":"1","level":"INFO","message":"Current version of schema \"public\": 1","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T13:11:22.9011666Z","@version":"1","level":"INFO","message":"Schema \"public\" is up to date. No migration necessary.","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T13:11:23.2844553Z","@version":"1","level":"INFO","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"bookings-service","thread":"main","logger":"o.h.jpa.internal.util.LogHelper"}
{"@timestamp":"2025-12-09T13:11:23.348461Z","@version":"1","level":"INFO","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"bookings-service","thread":"main","logger":"org.hibernate.Version"}
{"@timestamp":"2025-12-09T13:11:23.3919687Z","@version":"1","level":"INFO","message":"HHH000026: Second-level cache disabled","service":"bookings-service","thread":"main","logger":"o.h.c.i.RegionFactoryInitiator"}
{"@timestamp":"2025-12-09T13:11:23.6282327Z","@version":"1","level":"INFO","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"bookings-service","thread":"main","logger":"o.s.o.j.p.SpringPersistenceUnitInfo"}
{"@timestamp":"2025-12-09T13:11:23.7377929Z","@version":"1","level":"WARN","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"bookings-service","thread":"main","logger":"org.hibernate.orm.deprecation"}
{"@timestamp":"2025-12-09T13:11:24.6347028Z","@version":"1","level":"INFO","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"bookings-service","thread":"main","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator"}
{"@timestamp":"2025-12-09T13:11:26.2359398Z","@version":"1","level":"INFO","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"bookings-service","thread":"main","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean"}
{"@timestamp":"2025-12-09T13:11:26.6269672Z","@version":"1","level":"INFO","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"bookings-service","thread":"main","logger":"o.s.d.j.r.query.QueryEnhancerFactory"}
{"@timestamp":"2025-12-09T13:11:27.3778499Z","@version":"1","level":"WARN","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"bookings-service","thread":"main","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration"}
{"@timestamp":"2025-12-09T13:11:28.3416339Z","@version":"1","level":"INFO","message":"Exposing 2 endpoint(s) beneath base path '/actuator'","service":"bookings-service","thread":"main","logger":"o.s.b.a.e.web.EndpointLinksResolver"}
{"@timestamp":"2025-12-09T13:11:28.4562922Z","@version":"1","level":"INFO","message":"Tomcat started on port 8093 (http) with context path ''","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T13:11:28.4833528Z","@version":"1","level":"INFO","message":"Started BookingsServiceApplication in 11.713 seconds (process running for 12.183)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:11:37.7179088Z","@version":"1","level":"INFO","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T13:11:37.7179088Z","@version":"1","level":"INFO","message":"Initializing Servlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T13:11:37.7198991Z","@version":"1","level":"INFO","message":"Completed initialization in 2 ms","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T13:11:37.7877576Z","@version":"1","level":"DEBUG","message":"Creating new booking","traceId":"4d66849a-399e-4fc0-8734-f6279a112a60","correlationId":"4d66849a-399e-4fc0-8734-f6279a112a60","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T13:11:37.9412433Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.application_id,\r\n        a1_0.accommodation_details,\r\n        a1_0.agent_id,\r\n        a1_0.applicant_id,\r\n        a1_0.application_type,\r\n        a1_0.cancellation_reason,\r\n        a1_0.cancelled_by_id,\r\n        a1_0.cancelled_date,\r\n        a1_0.completed_date,\r\n        a1_0.created_by_user_id,\r\n        a1_0.created_by_user_type,\r\n        a1_0.created_date,\r\n        a1_0.currency,\r\n        a1_0.current_step,\r\n        a1_0.destination_country_id,\r\n        a1_0.expiry_date,\r\n        a1_0.form_data_json,\r\n        a1_0.intended_arrival_date,\r\n        a1_0.intended_departure_date,\r\n        a1_0.internal_notes,\r\n        a1_0.is_draft,\r\n        a1_0.paid_amount,\r\n        a1_0.priority,\r\n        a1_0.reference_number,\r\n        a1_0.refunded_amount,\r\n        a1_0.sla_due_date,\r\n        a1_0.status,\r\n        a1_0.sub_status,\r\n        a1_0.submission_date,\r\n        a1_0.total_fee_amount,\r\n        a1_0.total_steps,\r\n        a1_0.travel_purpose,\r\n        a1_0.updated_date,\r\n        a1_0.vac_id,\r\n        a1_0.visa_type_id \r\n    from\r\n        application a1_0 \r\n    where\r\n        a1_0.application_id=?","traceId":"4d66849a-399e-4fc0-8734-f6279a112a60","correlationId":"4d66849a-399e-4fc0-8734-f6279a112a60","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:11:38.013176Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        as1_0.application_service_id,\r\n        as1_0.added_date,\r\n        as1_0.application_id,\r\n        as1_0.completed_date,\r\n        as1_0.quantity,\r\n        as1_0.service_id,\r\n        as1_0.status,\r\n        as1_0.tax_amount,\r\n        as1_0.total_price,\r\n        as1_0.unit_price \r\n    from\r\n        application_service as1_0 \r\n    where\r\n        as1_0.application_service_id=?","traceId":"4d66849a-399e-4fc0-8734-f6279a112a60","correlationId":"4d66849a-399e-4fc0-8734-f6279a112a60","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:11:38.1531134Z","@version":"1","level":"DEBUG","message":"\r\n    /* insert for\r\n        com.vfsglobal.bookings.entity.Application */insert \r\n    into\r\n        application (accommodation_details, agent_id, applicant_id, application_type, cancellation_reason, cancelled_by_id, cancelled_date, completed_date, created_by_user_id, created_by_user_type, created_date, currency, current_step, destination_country_id, expiry_date, form_data_json, intended_arrival_date, intended_departure_date, internal_notes, is_draft, paid_amount, priority, reference_number, refunded_amount, sla_due_date, status, sub_status, submission_date, total_fee_amount, total_steps, travel_purpose, updated_date, vac_id, visa_type_id, application_id) \r\n    values\r\n        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","traceId":"4d66849a-399e-4fc0-8734-f6279a112a60","correlationId":"4d66849a-399e-4fc0-8734-f6279a112a60","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:11:38.2179541Z","@version":"1","level":"WARN","message":"SQL Error: 0, SQLState: 23502","traceId":"4d66849a-399e-4fc0-8734-f6279a112a60","correlationId":"4d66849a-399e-4fc0-8734-f6279a112a60","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T13:11:38.2189539Z","@version":"1","level":"ERROR","message":"ERROR: null value in column \"applicant_id\" of relation \"application\" violates not-null constraint\n  Detail: Failing row contains (262c9279-0c56-4c46-8872-4245d74fccac, VFS-2025-074433, null, null, 21283df7-b188-42ce-8930-d92f399c4d50, d5fd64fa-7184-4f2d-9f6a-8004edfc9f66, null, NEW, PAYMENT_PENDING, null, f, 1, 5, null, null, null, null, null, null, null, null, 0.00, 0.00, 0.00, USD, null, 5, null, null, null, null, 2025-12-09 18:41:37.902045+05:30, 2025-12-09 18:41:37.902045+05:30, APPLICANT, c60c3f8b-7639-495e-a60f-a97307fe7188).","traceId":"4d66849a-399e-4fc0-8734-f6279a112a60","correlationId":"4d66849a-399e-4fc0-8734-f6279a112a60","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T13:11:38.2782706Z","@version":"1","level":"ERROR","message":"Runtime exception occurred","traceId":"4d66849a-399e-4fc0-8734-f6279a112a60","correlationId":"4d66849a-399e-4fc0-8734-f6279a112a60","stack_trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement [ERROR: null value in column \"applicant_id\" of relation \"application\" violates not-null constraint\n  Detail: Failing row contains (262c9279-0c56-4c46-8872-4245d74fccac, VFS-2025-074433, null, null, 21283df7-b188-42ce-8930-d92f399c4d50, d5fd64fa-7184-4f2d-9f6a-8004edfc9f66, null, NEW, PAYMENT_PENDING, null, f, 1, 5, null, null, null, null, null, null, null, null, 0.00, 0.00, 0.00, USD, null, 5, null, null, null, null, 2025-12-09 18:41:37.902045+05:30, 2025-12-09 18:41:37.902045+05:30, APPLICANT, c60c3f8b-7639-495e-a60f-a97307fe7188).] [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; constraint [applicant_id\" of relation \"application]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\r\n\tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n\tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy161.findByApplicationId(Unknown Source)\r\n\tat com.vfsglobal.bookings.service.BookingService.mapToBookingResponse(BookingService.java:145)\r\n\tat com.vfsglobal.bookings.service.BookingService.createBooking(BookingService.java:71)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat com.vfsglobal.bookings.service.BookingService$$SpringCGLIB$$0.createBooking(<generated>)\r\n\tat com.vfsglobal.bookings.controller.BookingController.createBooking(BookingController.java:28)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat com.vfsglobal.bookings.filter.CorrelationIdFilter.doFilterInternal(CorrelationIdFilter.java:58)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [ERROR: null value in column \"applicant_id\" of relation \"application\" violates not-null constraint\n  Detail: Failing row contains (262c9279-0c56-4c46-8872-4245d74fccac, VFS-2025-074433, null, null, 21283df7-b188-42ce-8930-d92f399c4d50, d5fd64fa-7184-4f2d-9f6a-8004edfc9f66, null, NEW, PAYMENT_PENDING, null, f, 1, 5, null, null, null, null, null, null, null, null, 0.00, 0.00, 0.00, USD, null, 5, null, null, null, null, 2025-12-09 18:41:37.902045+05:30, 2025-12-09 18:41:37.902045+05:30, APPLICANT, c60c3f8b-7639-495e-a60f-a97307fe7188).] [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:97)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:283)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:107)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:40)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:52)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:171)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2865)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:102)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:631)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:55)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1378)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:107)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:305)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:246)\r\n\tat org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)\r\n\tat org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)\r\n\tat org.hibernate.query.Query.getResultList(Query.java:120)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n\t... 79 common frames omitted\r\nCaused by: org.postgresql.util.PSQLException: ERROR: null value in column \"applicant_id\" of relation \"application\" violates not-null constraint\n  Detail: Failing row contains (262c9279-0c56-4c46-8872-4245d74fccac, VFS-2025-074433, null, null, 21283df7-b188-42ce-8930-d92f399c4d50, d5fd64fa-7184-4f2d-9f6a-8004edfc9f66, null, NEW, PAYMENT_PENDING, null, f, 1, 5, null, null, null, null, null, null, null, null, 0.00, 0.00, 0.00, USD, null, 5, null, null, null, null, 2025-12-09 18:41:37.902045+05:30, 2025-12-09 18:41:37.902045+05:30, APPLICANT, c60c3f8b-7639-495e-a60f-a97307fe7188).\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:190)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:152)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:280)\r\n\t... 114 common frames omitted\r\n","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T13:21:40.8495848Z","@version":"1","level":"INFO","message":"Starting BookingsServiceApplication using Java 21.0.6 with PID 17504 (C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service\\target\\classes started by mahalakshmi.gopi in C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:21:40.8589951Z","@version":"1","level":"DEBUG","message":"Running with Spring Boot v3.2.0, Spring v6.1.1","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:21:40.8599944Z","@version":"1","level":"INFO","message":"No active profile set, falling back to 1 default profile: \"default\"","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:21:41.7469263Z","@version":"1","level":"INFO","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T13:21:41.8039917Z","@version":"1","level":"INFO","message":"Finished Spring Data repository scanning in 50 ms. Found 3 JPA repository interfaces.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T13:21:43.0451561Z","@version":"1","level":"INFO","message":"Tomcat initialized with port 8093 (http)","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T13:21:43.0581566Z","@version":"1","level":"INFO","message":"Starting service [Tomcat]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardService"}
{"@timestamp":"2025-12-09T13:21:43.0591586Z","@version":"1","level":"INFO","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardEngine"}
{"@timestamp":"2025-12-09T13:21:43.1899217Z","@version":"1","level":"INFO","message":"Initializing Spring embedded WebApplicationContext","service":"bookings-service","thread":"main","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T13:21:43.1899217Z","@version":"1","level":"INFO","message":"Root WebApplicationContext: initialization completed in 2232 ms","service":"bookings-service","thread":"main","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext"}
{"@timestamp":"2025-12-09T13:21:43.4224128Z","@version":"1","level":"DEBUG","message":"Filter 'correlationIdFilter' configured for use","service":"bookings-service","thread":"main","logger":"c.v.b.filter.CorrelationIdFilter"}
{"@timestamp":"2025-12-09T13:21:43.6634617Z","@version":"1","level":"INFO","message":"HikariPool-1 - Starting...","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T13:21:44.8201899Z","@version":"1","level":"INFO","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@14499b52","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.pool.HikariPool"}
{"@timestamp":"2025-12-09T13:21:44.8211154Z","@version":"1","level":"INFO","message":"HikariPool-1 - Start completed.","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T13:21:44.9413446Z","@version":"1","level":"INFO","message":"Database: jdbc:postgresql://dpg-d4pe89muk2gs73dcir30-a.singapore-postgres.render.com:5432/vams_c1jg (PostgreSQL 18.1)","service":"bookings-service","thread":"main","logger":"org.flywaydb.core.FlywayExecutor"}
{"@timestamp":"2025-12-09T13:21:45.2424761Z","@version":"1","level":"WARN","message":"Flyway upgrade recommended: PostgreSQL 18.1 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 16.","service":"bookings-service","thread":"main","logger":"o.f.c.i.database.base.Database"}
{"@timestamp":"2025-12-09T13:21:45.5097782Z","@version":"1","level":"INFO","message":"Successfully validated 2 migrations (execution time 00:00.211s)","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbValidate"}
{"@timestamp":"2025-12-09T13:21:46.0114929Z","@version":"1","level":"INFO","message":"Current version of schema \"public\": 1","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T13:21:46.0596805Z","@version":"1","level":"INFO","message":"Schema \"public\" is up to date. No migration necessary.","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T13:21:46.4534621Z","@version":"1","level":"INFO","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"bookings-service","thread":"main","logger":"o.h.jpa.internal.util.LogHelper"}
{"@timestamp":"2025-12-09T13:21:46.5136138Z","@version":"1","level":"INFO","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"bookings-service","thread":"main","logger":"org.hibernate.Version"}
{"@timestamp":"2025-12-09T13:21:46.555554Z","@version":"1","level":"INFO","message":"HHH000026: Second-level cache disabled","service":"bookings-service","thread":"main","logger":"o.h.c.i.RegionFactoryInitiator"}
{"@timestamp":"2025-12-09T13:21:46.7905381Z","@version":"1","level":"INFO","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"bookings-service","thread":"main","logger":"o.s.o.j.p.SpringPersistenceUnitInfo"}
{"@timestamp":"2025-12-09T13:21:46.885339Z","@version":"1","level":"WARN","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"bookings-service","thread":"main","logger":"org.hibernate.orm.deprecation"}
{"@timestamp":"2025-12-09T13:21:47.8046316Z","@version":"1","level":"INFO","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"bookings-service","thread":"main","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator"}
{"@timestamp":"2025-12-09T13:21:49.3543677Z","@version":"1","level":"INFO","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"bookings-service","thread":"main","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean"}
{"@timestamp":"2025-12-09T13:21:49.7551196Z","@version":"1","level":"INFO","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"bookings-service","thread":"main","logger":"o.s.d.j.r.query.QueryEnhancerFactory"}
{"@timestamp":"2025-12-09T13:21:50.6226744Z","@version":"1","level":"WARN","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"bookings-service","thread":"main","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration"}
{"@timestamp":"2025-12-09T13:21:51.5659496Z","@version":"1","level":"INFO","message":"Exposing 2 endpoint(s) beneath base path '/actuator'","service":"bookings-service","thread":"main","logger":"o.s.b.a.e.web.EndpointLinksResolver"}
{"@timestamp":"2025-12-09T13:21:51.6926542Z","@version":"1","level":"INFO","message":"Tomcat started on port 8093 (http) with context path ''","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T13:21:51.7101582Z","@version":"1","level":"INFO","message":"Started BookingsServiceApplication in 11.584 seconds (process running for 12.025)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:22:28.0641875Z","@version":"1","level":"INFO","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T13:22:28.0651875Z","@version":"1","level":"INFO","message":"Initializing Servlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T13:22:28.0681898Z","@version":"1","level":"INFO","message":"Completed initialization in 1 ms","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T13:22:28.1430855Z","@version":"1","level":"DEBUG","message":"Creating new booking","traceId":"13a999f9-c609-417a-8111-29a0d182ac46","correlationId":"13a999f9-c609-417a-8111-29a0d182ac46","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T13:22:28.2484227Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.applicant_id,\r\n        a1_0.address,\r\n        a1_0.city,\r\n        a1_0.date_of_birth,\r\n        a1_0.email,\r\n        a1_0.first_name,\r\n        a1_0.is_active,\r\n        a1_0.last_name,\r\n        a1_0.middle_name,\r\n        a1_0.passport_expiry_date,\r\n        a1_0.passport_number,\r\n        a1_0.phone,\r\n        a1_0.postal_code,\r\n        a1_0.state \r\n    from\r\n        applicant a1_0 \r\n    where\r\n        a1_0.applicant_id=?","traceId":"13a999f9-c609-417a-8111-29a0d182ac46","correlationId":"13a999f9-c609-417a-8111-29a0d182ac46","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:22:28.3166216Z","@version":"1","level":"DEBUG","message":"Using provided applicant ID: a0100000-0000-0000-0000-000000000001","traceId":"13a999f9-c609-417a-8111-29a0d182ac46","correlationId":"13a999f9-c609-417a-8111-29a0d182ac46","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"c.v.bookings.service.BookingService"}
{"@timestamp":"2025-12-09T13:22:28.3256388Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.application_id,\r\n        a1_0.accommodation_details,\r\n        a1_0.agent_id,\r\n        a1_0.applicant_id,\r\n        a1_0.application_type,\r\n        a1_0.cancellation_reason,\r\n        a1_0.cancelled_by_id,\r\n        a1_0.cancelled_date,\r\n        a1_0.completed_date,\r\n        a1_0.created_by_user_id,\r\n        a1_0.created_by_user_type,\r\n        a1_0.created_date,\r\n        a1_0.currency,\r\n        a1_0.current_step,\r\n        a1_0.destination_country_id,\r\n        a1_0.expiry_date,\r\n        a1_0.form_data_json,\r\n        a1_0.intended_arrival_date,\r\n        a1_0.intended_departure_date,\r\n        a1_0.internal_notes,\r\n        a1_0.is_draft,\r\n        a1_0.paid_amount,\r\n        a1_0.priority,\r\n        a1_0.reference_number,\r\n        a1_0.refunded_amount,\r\n        a1_0.sla_due_date,\r\n        a1_0.status,\r\n        a1_0.sub_status,\r\n        a1_0.submission_date,\r\n        a1_0.total_fee_amount,\r\n        a1_0.total_steps,\r\n        a1_0.travel_purpose,\r\n        a1_0.updated_date,\r\n        a1_0.vac_id,\r\n        a1_0.visa_type_id \r\n    from\r\n        application a1_0 \r\n    where\r\n        a1_0.application_id=?","traceId":"13a999f9-c609-417a-8111-29a0d182ac46","correlationId":"13a999f9-c609-417a-8111-29a0d182ac46","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:22:28.3866049Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        as1_0.application_service_id,\r\n        as1_0.added_date,\r\n        as1_0.application_id,\r\n        as1_0.completed_date,\r\n        as1_0.quantity,\r\n        as1_0.service_id,\r\n        as1_0.status,\r\n        as1_0.tax_amount,\r\n        as1_0.total_price,\r\n        as1_0.unit_price \r\n    from\r\n        application_service as1_0 \r\n    where\r\n        as1_0.application_service_id=?","traceId":"13a999f9-c609-417a-8111-29a0d182ac46","correlationId":"13a999f9-c609-417a-8111-29a0d182ac46","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:22:28.5354185Z","@version":"1","level":"DEBUG","message":"\r\n    /* insert for\r\n        com.vfsglobal.bookings.entity.Application */insert \r\n    into\r\n        application (accommodation_details, agent_id, applicant_id, application_type, cancellation_reason, cancelled_by_id, cancelled_date, completed_date, created_by_user_id, created_by_user_type, created_date, currency, current_step, destination_country_id, expiry_date, form_data_json, intended_arrival_date, intended_departure_date, internal_notes, is_draft, paid_amount, priority, reference_number, refunded_amount, sla_due_date, status, sub_status, submission_date, total_fee_amount, total_steps, travel_purpose, updated_date, vac_id, visa_type_id, application_id) \r\n    values\r\n        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","traceId":"13a999f9-c609-417a-8111-29a0d182ac46","correlationId":"13a999f9-c609-417a-8111-29a0d182ac46","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:22:28.5951794Z","@version":"1","level":"WARN","message":"SQL Error: 0, SQLState: 23503","traceId":"13a999f9-c609-417a-8111-29a0d182ac46","correlationId":"13a999f9-c609-417a-8111-29a0d182ac46","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T13:22:28.5951794Z","@version":"1","level":"ERROR","message":"ERROR: insert or update on table \"application\" violates foreign key constraint \"application_visa_type_id_fkey\"\n  Detail: Key (visa_type_id)=(a26e08f6-aba3-42b4-a162-a2b6c276dd5b) is not present in table \"visa_type\".","traceId":"13a999f9-c609-417a-8111-29a0d182ac46","correlationId":"13a999f9-c609-417a-8111-29a0d182ac46","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T13:22:28.657007Z","@version":"1","level":"ERROR","message":"Runtime exception occurred","traceId":"13a999f9-c609-417a-8111-29a0d182ac46","correlationId":"13a999f9-c609-417a-8111-29a0d182ac46","stack_trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement [ERROR: insert or update on table \"application\" violates foreign key constraint \"application_visa_type_id_fkey\"\n  Detail: Key (visa_type_id)=(a26e08f6-aba3-42b4-a162-a2b6c276dd5b) is not present in table \"visa_type\".] [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; constraint [application_visa_type_id_fkey]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\r\n\tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n\tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy161.findByApplicationId(Unknown Source)\r\n\tat com.vfsglobal.bookings.service.BookingService.mapToBookingResponse(BookingService.java:158)\r\n\tat com.vfsglobal.bookings.service.BookingService.createBooking(BookingService.java:84)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat com.vfsglobal.bookings.service.BookingService$$SpringCGLIB$$0.createBooking(<generated>)\r\n\tat com.vfsglobal.bookings.controller.BookingController.createBooking(BookingController.java:28)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat com.vfsglobal.bookings.filter.CorrelationIdFilter.doFilterInternal(CorrelationIdFilter.java:58)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [ERROR: insert or update on table \"application\" violates foreign key constraint \"application_visa_type_id_fkey\"\n  Detail: Key (visa_type_id)=(a26e08f6-aba3-42b4-a162-a2b6c276dd5b) is not present in table \"visa_type\".] [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:97)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:283)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:107)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:40)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:52)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:171)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2865)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:102)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:631)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:55)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1378)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:107)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:305)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:246)\r\n\tat org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)\r\n\tat org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)\r\n\tat org.hibernate.query.Query.getResultList(Query.java:120)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n\t... 79 common frames omitted\r\nCaused by: org.postgresql.util.PSQLException: ERROR: insert or update on table \"application\" violates foreign key constraint \"application_visa_type_id_fkey\"\n  Detail: Key (visa_type_id)=(a26e08f6-aba3-42b4-a162-a2b6c276dd5b) is not present in table \"visa_type\".\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:190)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:152)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:280)\r\n\t... 114 common frames omitted\r\n","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T13:26:37.4195146Z","@version":"1","level":"DEBUG","message":"Creating new booking","traceId":"16a0847b-a08b-45d9-bda4-0cbdf31c767d","correlationId":"16a0847b-a08b-45d9-bda4-0cbdf31c767d","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T13:26:37.4678385Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.applicant_id,\r\n        a1_0.address,\r\n        a1_0.city,\r\n        a1_0.date_of_birth,\r\n        a1_0.email,\r\n        a1_0.first_name,\r\n        a1_0.is_active,\r\n        a1_0.last_name,\r\n        a1_0.middle_name,\r\n        a1_0.passport_expiry_date,\r\n        a1_0.passport_number,\r\n        a1_0.phone,\r\n        a1_0.postal_code,\r\n        a1_0.state \r\n    from\r\n        applicant a1_0 \r\n    where\r\n        a1_0.applicant_id=?","traceId":"16a0847b-a08b-45d9-bda4-0cbdf31c767d","correlationId":"16a0847b-a08b-45d9-bda4-0cbdf31c767d","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:26:37.5114239Z","@version":"1","level":"DEBUG","message":"Using provided applicant ID: a0100000-0000-0000-0000-000000000001","traceId":"16a0847b-a08b-45d9-bda4-0cbdf31c767d","correlationId":"16a0847b-a08b-45d9-bda4-0cbdf31c767d","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"c.v.bookings.service.BookingService"}
{"@timestamp":"2025-12-09T13:26:37.5134255Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.application_id,\r\n        a1_0.accommodation_details,\r\n        a1_0.agent_id,\r\n        a1_0.applicant_id,\r\n        a1_0.application_type,\r\n        a1_0.cancellation_reason,\r\n        a1_0.cancelled_by_id,\r\n        a1_0.cancelled_date,\r\n        a1_0.completed_date,\r\n        a1_0.created_by_user_id,\r\n        a1_0.created_by_user_type,\r\n        a1_0.created_date,\r\n        a1_0.currency,\r\n        a1_0.current_step,\r\n        a1_0.destination_country_id,\r\n        a1_0.expiry_date,\r\n        a1_0.form_data_json,\r\n        a1_0.intended_arrival_date,\r\n        a1_0.intended_departure_date,\r\n        a1_0.internal_notes,\r\n        a1_0.is_draft,\r\n        a1_0.paid_amount,\r\n        a1_0.priority,\r\n        a1_0.reference_number,\r\n        a1_0.refunded_amount,\r\n        a1_0.sla_due_date,\r\n        a1_0.status,\r\n        a1_0.sub_status,\r\n        a1_0.submission_date,\r\n        a1_0.total_fee_amount,\r\n        a1_0.total_steps,\r\n        a1_0.travel_purpose,\r\n        a1_0.updated_date,\r\n        a1_0.vac_id,\r\n        a1_0.visa_type_id \r\n    from\r\n        application a1_0 \r\n    where\r\n        a1_0.application_id=?","traceId":"16a0847b-a08b-45d9-bda4-0cbdf31c767d","correlationId":"16a0847b-a08b-45d9-bda4-0cbdf31c767d","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:26:37.5605589Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        as1_0.application_service_id,\r\n        as1_0.added_date,\r\n        as1_0.application_id,\r\n        as1_0.completed_date,\r\n        as1_0.quantity,\r\n        as1_0.service_id,\r\n        as1_0.status,\r\n        as1_0.tax_amount,\r\n        as1_0.total_price,\r\n        as1_0.unit_price \r\n    from\r\n        application_service as1_0 \r\n    where\r\n        as1_0.application_service_id=?","traceId":"16a0847b-a08b-45d9-bda4-0cbdf31c767d","correlationId":"16a0847b-a08b-45d9-bda4-0cbdf31c767d","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:26:37.6109244Z","@version":"1","level":"DEBUG","message":"\r\n    /* insert for\r\n        com.vfsglobal.bookings.entity.Application */insert \r\n    into\r\n        application (accommodation_details, agent_id, applicant_id, application_type, cancellation_reason, cancelled_by_id, cancelled_date, completed_date, created_by_user_id, created_by_user_type, created_date, currency, current_step, destination_country_id, expiry_date, form_data_json, intended_arrival_date, intended_departure_date, internal_notes, is_draft, paid_amount, priority, reference_number, refunded_amount, sla_due_date, status, sub_status, submission_date, total_fee_amount, total_steps, travel_purpose, updated_date, vac_id, visa_type_id, application_id) \r\n    values\r\n        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","traceId":"16a0847b-a08b-45d9-bda4-0cbdf31c767d","correlationId":"16a0847b-a08b-45d9-bda4-0cbdf31c767d","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:26:37.6575204Z","@version":"1","level":"WARN","message":"SQL Error: 0, SQLState: 23503","traceId":"16a0847b-a08b-45d9-bda4-0cbdf31c767d","correlationId":"16a0847b-a08b-45d9-bda4-0cbdf31c767d","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T13:26:37.6575204Z","@version":"1","level":"ERROR","message":"ERROR: insert or update on table \"application\" violates foreign key constraint \"application_visa_type_id_fkey\"\n  Detail: Key (visa_type_id)=(c95a351b-13e3-4fdd-a279-7eb26d133b73) is not present in table \"visa_type\".","traceId":"16a0847b-a08b-45d9-bda4-0cbdf31c767d","correlationId":"16a0847b-a08b-45d9-bda4-0cbdf31c767d","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T13:26:37.7049085Z","@version":"1","level":"ERROR","message":"Runtime exception occurred","traceId":"16a0847b-a08b-45d9-bda4-0cbdf31c767d","correlationId":"16a0847b-a08b-45d9-bda4-0cbdf31c767d","stack_trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement [ERROR: insert or update on table \"application\" violates foreign key constraint \"application_visa_type_id_fkey\"\n  Detail: Key (visa_type_id)=(c95a351b-13e3-4fdd-a279-7eb26d133b73) is not present in table \"visa_type\".] [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; constraint [application_visa_type_id_fkey]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\r\n\tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n\tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy161.findByApplicationId(Unknown Source)\r\n\tat com.vfsglobal.bookings.service.BookingService.mapToBookingResponse(BookingService.java:158)\r\n\tat com.vfsglobal.bookings.service.BookingService.createBooking(BookingService.java:84)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat com.vfsglobal.bookings.service.BookingService$$SpringCGLIB$$0.createBooking(<generated>)\r\n\tat com.vfsglobal.bookings.controller.BookingController.createBooking(BookingController.java:28)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat com.vfsglobal.bookings.filter.CorrelationIdFilter.doFilterInternal(CorrelationIdFilter.java:58)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [ERROR: insert or update on table \"application\" violates foreign key constraint \"application_visa_type_id_fkey\"\n  Detail: Key (visa_type_id)=(c95a351b-13e3-4fdd-a279-7eb26d133b73) is not present in table \"visa_type\".] [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:97)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:283)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:107)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:40)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:52)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:171)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2865)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:102)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:631)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:55)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1378)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:107)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:305)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:246)\r\n\tat org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)\r\n\tat org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)\r\n\tat org.hibernate.query.Query.getResultList(Query.java:120)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n\t... 79 common frames omitted\r\nCaused by: org.postgresql.util.PSQLException: ERROR: insert or update on table \"application\" violates foreign key constraint \"application_visa_type_id_fkey\"\n  Detail: Key (visa_type_id)=(c95a351b-13e3-4fdd-a279-7eb26d133b73) is not present in table \"visa_type\".\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:190)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:152)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:280)\r\n\t... 114 common frames omitted\r\n","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T13:31:07.6715117Z","@version":"1","level":"INFO","message":"Starting BookingsServiceApplication using Java 21.0.6 with PID 13272 (C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service\\target\\classes started by mahalakshmi.gopi in C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:31:07.6775141Z","@version":"1","level":"DEBUG","message":"Running with Spring Boot v3.2.0, Spring v6.1.1","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:31:07.6785196Z","@version":"1","level":"INFO","message":"No active profile set, falling back to 1 default profile: \"default\"","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:31:08.35914Z","@version":"1","level":"INFO","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T13:31:08.4147933Z","@version":"1","level":"INFO","message":"Finished Spring Data repository scanning in 49 ms. Found 4 JPA repository interfaces.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T13:31:09.7451969Z","@version":"1","level":"INFO","message":"Tomcat initialized with port 8093 (http)","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T13:31:09.7552382Z","@version":"1","level":"INFO","message":"Starting service [Tomcat]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardService"}
{"@timestamp":"2025-12-09T13:31:09.7552382Z","@version":"1","level":"INFO","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardEngine"}
{"@timestamp":"2025-12-09T13:31:09.8481738Z","@version":"1","level":"INFO","message":"Initializing Spring embedded WebApplicationContext","service":"bookings-service","thread":"main","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T13:31:09.8481738Z","@version":"1","level":"INFO","message":"Root WebApplicationContext: initialization completed in 2119 ms","service":"bookings-service","thread":"main","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext"}
{"@timestamp":"2025-12-09T13:31:10.0870938Z","@version":"1","level":"DEBUG","message":"Filter 'correlationIdFilter' configured for use","service":"bookings-service","thread":"main","logger":"c.v.b.filter.CorrelationIdFilter"}
{"@timestamp":"2025-12-09T13:31:10.318871Z","@version":"1","level":"INFO","message":"HikariPool-1 - Starting...","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T13:31:11.5719443Z","@version":"1","level":"INFO","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5383bf08","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.pool.HikariPool"}
{"@timestamp":"2025-12-09T13:31:11.5738649Z","@version":"1","level":"INFO","message":"HikariPool-1 - Start completed.","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T13:31:11.9622651Z","@version":"1","level":"INFO","message":"Database: jdbc:postgresql://dpg-d4pe89muk2gs73dcir30-a.singapore-postgres.render.com:5432/vams_c1jg (PostgreSQL 18.1)","service":"bookings-service","thread":"main","logger":"org.flywaydb.core.FlywayExecutor"}
{"@timestamp":"2025-12-09T13:31:12.2696929Z","@version":"1","level":"WARN","message":"Flyway upgrade recommended: PostgreSQL 18.1 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 16.","service":"bookings-service","thread":"main","logger":"o.f.c.i.database.base.Database"}
{"@timestamp":"2025-12-09T13:31:12.5601142Z","@version":"1","level":"INFO","message":"Successfully validated 2 migrations (execution time 00:00.228s)","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbValidate"}
{"@timestamp":"2025-12-09T13:31:14.0039426Z","@version":"1","level":"INFO","message":"Current version of schema \"public\": 1","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T13:31:14.0516194Z","@version":"1","level":"INFO","message":"Schema \"public\" is up to date. No migration necessary.","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T13:31:14.4801025Z","@version":"1","level":"INFO","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"bookings-service","thread":"main","logger":"o.h.jpa.internal.util.LogHelper"}
{"@timestamp":"2025-12-09T13:31:14.5412878Z","@version":"1","level":"INFO","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"bookings-service","thread":"main","logger":"org.hibernate.Version"}
{"@timestamp":"2025-12-09T13:31:14.5798863Z","@version":"1","level":"INFO","message":"HHH000026: Second-level cache disabled","service":"bookings-service","thread":"main","logger":"o.h.c.i.RegionFactoryInitiator"}
{"@timestamp":"2025-12-09T13:31:14.8082391Z","@version":"1","level":"INFO","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"bookings-service","thread":"main","logger":"o.s.o.j.p.SpringPersistenceUnitInfo"}
{"@timestamp":"2025-12-09T13:31:15.3137389Z","@version":"1","level":"WARN","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"bookings-service","thread":"main","logger":"org.hibernate.orm.deprecation"}
{"@timestamp":"2025-12-09T13:31:16.1715314Z","@version":"1","level":"INFO","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"bookings-service","thread":"main","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator"}
{"@timestamp":"2025-12-09T13:31:18.6740764Z","@version":"1","level":"INFO","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"bookings-service","thread":"main","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean"}
{"@timestamp":"2025-12-09T13:31:19.1263099Z","@version":"1","level":"INFO","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"bookings-service","thread":"main","logger":"o.s.d.j.r.query.QueryEnhancerFactory"}
{"@timestamp":"2025-12-09T13:31:19.9790771Z","@version":"1","level":"WARN","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"bookings-service","thread":"main","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration"}
{"@timestamp":"2025-12-09T13:31:20.9567307Z","@version":"1","level":"INFO","message":"Exposing 2 endpoint(s) beneath base path '/actuator'","service":"bookings-service","thread":"main","logger":"o.s.b.a.e.web.EndpointLinksResolver"}
{"@timestamp":"2025-12-09T13:31:21.0576065Z","@version":"1","level":"INFO","message":"Tomcat started on port 8093 (http) with context path ''","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T13:31:21.0774811Z","@version":"1","level":"INFO","message":"Started BookingsServiceApplication in 14.114 seconds (process running for 14.595)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:31:26.4869296Z","@version":"1","level":"INFO","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T13:31:26.4883428Z","@version":"1","level":"INFO","message":"Initializing Servlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T13:31:26.490347Z","@version":"1","level":"INFO","message":"Completed initialization in 2 ms","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T13:31:26.559141Z","@version":"1","level":"DEBUG","message":"Creating new booking","traceId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","correlationId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T13:31:26.6673453Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.applicant_id,\r\n        a1_0.address,\r\n        a1_0.city,\r\n        a1_0.date_of_birth,\r\n        a1_0.email,\r\n        a1_0.first_name,\r\n        a1_0.is_active,\r\n        a1_0.last_name,\r\n        a1_0.middle_name,\r\n        a1_0.passport_expiry_date,\r\n        a1_0.passport_number,\r\n        a1_0.phone,\r\n        a1_0.postal_code,\r\n        a1_0.state \r\n    from\r\n        applicant a1_0 \r\n    where\r\n        a1_0.applicant_id=?","traceId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","correlationId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:31:26.7226716Z","@version":"1","level":"DEBUG","message":"Using provided applicant ID: a0100000-0000-0000-0000-000000000001","traceId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","correlationId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"c.v.bookings.service.BookingService"}
{"@timestamp":"2025-12-09T13:31:26.7935888Z","@version":"1","level":"DEBUG","message":"\r\n    /* SELECT\r\n        vt \r\n    FROM\r\n        VisaType vt \r\n    WHERE\r\n        vt.visaTypeCode = :code \r\n        AND vt.isActive = true */ select\r\n            vt1_0.visa_type_id,\r\n            vt1_0.country_id,\r\n            vt1_0.is_active,\r\n            vt1_0.visa_type_code \r\n        from\r\n            visa_type vt1_0 \r\n        where\r\n            vt1_0.visa_type_code=? \r\n            and vt1_0.is_active=true","traceId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","correlationId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:31:26.8427179Z","@version":"1","level":"DEBUG","message":"Found visa type by code: UK-VISIT-STD -> c1000000-0000-0000-0000-000000000001","traceId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","correlationId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"c.v.bookings.service.BookingService"}
{"@timestamp":"2025-12-09T13:31:26.8547176Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.application_id,\r\n        a1_0.accommodation_details,\r\n        a1_0.agent_id,\r\n        a1_0.applicant_id,\r\n        a1_0.application_type,\r\n        a1_0.cancellation_reason,\r\n        a1_0.cancelled_by_id,\r\n        a1_0.cancelled_date,\r\n        a1_0.completed_date,\r\n        a1_0.created_by_user_id,\r\n        a1_0.created_by_user_type,\r\n        a1_0.created_date,\r\n        a1_0.currency,\r\n        a1_0.current_step,\r\n        a1_0.destination_country_id,\r\n        a1_0.expiry_date,\r\n        a1_0.form_data_json,\r\n        a1_0.intended_arrival_date,\r\n        a1_0.intended_departure_date,\r\n        a1_0.internal_notes,\r\n        a1_0.is_draft,\r\n        a1_0.paid_amount,\r\n        a1_0.priority,\r\n        a1_0.reference_number,\r\n        a1_0.refunded_amount,\r\n        a1_0.sla_due_date,\r\n        a1_0.status,\r\n        a1_0.sub_status,\r\n        a1_0.submission_date,\r\n        a1_0.total_fee_amount,\r\n        a1_0.total_steps,\r\n        a1_0.travel_purpose,\r\n        a1_0.updated_date,\r\n        a1_0.vac_id,\r\n        a1_0.visa_type_id \r\n    from\r\n        application a1_0 \r\n    where\r\n        a1_0.application_id=?","traceId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","correlationId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:31:27.4978801Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        as1_0.application_service_id,\r\n        as1_0.added_date,\r\n        as1_0.application_id,\r\n        as1_0.completed_date,\r\n        as1_0.quantity,\r\n        as1_0.service_id,\r\n        as1_0.status,\r\n        as1_0.tax_amount,\r\n        as1_0.total_price,\r\n        as1_0.unit_price \r\n    from\r\n        application_service as1_0 \r\n    where\r\n        as1_0.application_service_id=?","traceId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","correlationId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:31:27.5998311Z","@version":"1","level":"DEBUG","message":"\r\n    /* insert for\r\n        com.vfsglobal.bookings.entity.Application */insert \r\n    into\r\n        application (accommodation_details, agent_id, applicant_id, application_type, cancellation_reason, cancelled_by_id, cancelled_date, completed_date, created_by_user_id, created_by_user_type, created_date, currency, current_step, destination_country_id, expiry_date, form_data_json, intended_arrival_date, intended_departure_date, internal_notes, is_draft, paid_amount, priority, reference_number, refunded_amount, sla_due_date, status, sub_status, submission_date, total_fee_amount, total_steps, travel_purpose, updated_date, vac_id, visa_type_id, application_id) \r\n    values\r\n        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","traceId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","correlationId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:31:37.2645703Z","@version":"1","level":"WARN","message":"SQL Error: 0, SQLState: 23503","traceId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","correlationId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T13:31:37.2645703Z","@version":"1","level":"ERROR","message":"ERROR: insert or update on table \"application\" violates foreign key constraint \"application_vac_id_fkey\"\n  Detail: Key (vac_id)=(be993c0e-a4ef-4435-b061-bdc479eaded3) is not present in table \"vac\".","traceId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","correlationId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T13:31:37.3227265Z","@version":"1","level":"ERROR","message":"Runtime exception occurred","traceId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","correlationId":"d229d2f0-d886-48e7-96e7-d042ab2c9f10","stack_trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement [ERROR: insert or update on table \"application\" violates foreign key constraint \"application_vac_id_fkey\"\n  Detail: Key (vac_id)=(be993c0e-a4ef-4435-b061-bdc479eaded3) is not present in table \"vac\".] [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; constraint [application_vac_id_fkey]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\r\n\tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n\tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy161.findByApplicationId(Unknown Source)\r\n\tat com.vfsglobal.bookings.service.BookingService.mapToBookingResponse(BookingService.java:161)\r\n\tat com.vfsglobal.bookings.service.BookingService.createBooking(BookingService.java:87)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat com.vfsglobal.bookings.service.BookingService$$SpringCGLIB$$0.createBooking(<generated>)\r\n\tat com.vfsglobal.bookings.controller.BookingController.createBooking(BookingController.java:28)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat com.vfsglobal.bookings.filter.CorrelationIdFilter.doFilterInternal(CorrelationIdFilter.java:58)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [ERROR: insert or update on table \"application\" violates foreign key constraint \"application_vac_id_fkey\"\n  Detail: Key (vac_id)=(be993c0e-a4ef-4435-b061-bdc479eaded3) is not present in table \"vac\".] [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:97)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:283)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:107)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:40)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:52)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:171)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2865)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:102)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:631)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:55)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1378)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:107)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:305)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:246)\r\n\tat org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)\r\n\tat org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)\r\n\tat org.hibernate.query.Query.getResultList(Query.java:120)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n\t... 79 common frames omitted\r\nCaused by: org.postgresql.util.PSQLException: ERROR: insert or update on table \"application\" violates foreign key constraint \"application_vac_id_fkey\"\n  Detail: Key (vac_id)=(be993c0e-a4ef-4435-b061-bdc479eaded3) is not present in table \"vac\".\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:190)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:152)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:280)\r\n\t... 114 common frames omitted\r\n","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T13:39:45.9774812Z","@version":"1","level":"DEBUG","message":"Creating new booking","traceId":"79a808d5-815f-4acd-8902-ebf0a7982105","correlationId":"79a808d5-815f-4acd-8902-ebf0a7982105","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T13:39:46.0216594Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.applicant_id,\r\n        a1_0.address,\r\n        a1_0.city,\r\n        a1_0.date_of_birth,\r\n        a1_0.email,\r\n        a1_0.first_name,\r\n        a1_0.is_active,\r\n        a1_0.last_name,\r\n        a1_0.middle_name,\r\n        a1_0.passport_expiry_date,\r\n        a1_0.passport_number,\r\n        a1_0.phone,\r\n        a1_0.postal_code,\r\n        a1_0.state \r\n    from\r\n        applicant a1_0 \r\n    where\r\n        a1_0.applicant_id=?","traceId":"79a808d5-815f-4acd-8902-ebf0a7982105","correlationId":"79a808d5-815f-4acd-8902-ebf0a7982105","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:39:46.0673827Z","@version":"1","level":"DEBUG","message":"Using provided applicant ID: a0100000-0000-0000-0000-000000000001","traceId":"79a808d5-815f-4acd-8902-ebf0a7982105","correlationId":"79a808d5-815f-4acd-8902-ebf0a7982105","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"c.v.bookings.service.BookingService"}
{"@timestamp":"2025-12-09T13:39:46.0693829Z","@version":"1","level":"DEBUG","message":"\r\n    /* SELECT\r\n        vt \r\n    FROM\r\n        VisaType vt \r\n    WHERE\r\n        vt.visaTypeCode = :code \r\n        AND vt.isActive = true */ select\r\n            vt1_0.visa_type_id,\r\n            vt1_0.country_id,\r\n            vt1_0.is_active,\r\n            vt1_0.visa_type_code \r\n        from\r\n            visa_type vt1_0 \r\n        where\r\n            vt1_0.visa_type_code=? \r\n            and vt1_0.is_active=true","traceId":"79a808d5-815f-4acd-8902-ebf0a7982105","correlationId":"79a808d5-815f-4acd-8902-ebf0a7982105","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:39:46.3891709Z","@version":"1","level":"DEBUG","message":"Found visa type by code: US-B1B2-TOU -> c1000000-0000-0000-0000-000000000005","traceId":"79a808d5-815f-4acd-8902-ebf0a7982105","correlationId":"79a808d5-815f-4acd-8902-ebf0a7982105","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"c.v.bookings.service.BookingService"}
{"@timestamp":"2025-12-09T13:39:46.3901712Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.application_id,\r\n        a1_0.accommodation_details,\r\n        a1_0.agent_id,\r\n        a1_0.applicant_id,\r\n        a1_0.application_type,\r\n        a1_0.cancellation_reason,\r\n        a1_0.cancelled_by_id,\r\n        a1_0.cancelled_date,\r\n        a1_0.completed_date,\r\n        a1_0.created_by_user_id,\r\n        a1_0.created_by_user_type,\r\n        a1_0.created_date,\r\n        a1_0.currency,\r\n        a1_0.current_step,\r\n        a1_0.destination_country_id,\r\n        a1_0.expiry_date,\r\n        a1_0.form_data_json,\r\n        a1_0.intended_arrival_date,\r\n        a1_0.intended_departure_date,\r\n        a1_0.internal_notes,\r\n        a1_0.is_draft,\r\n        a1_0.paid_amount,\r\n        a1_0.priority,\r\n        a1_0.reference_number,\r\n        a1_0.refunded_amount,\r\n        a1_0.sla_due_date,\r\n        a1_0.status,\r\n        a1_0.sub_status,\r\n        a1_0.submission_date,\r\n        a1_0.total_fee_amount,\r\n        a1_0.total_steps,\r\n        a1_0.travel_purpose,\r\n        a1_0.updated_date,\r\n        a1_0.vac_id,\r\n        a1_0.visa_type_id \r\n    from\r\n        application a1_0 \r\n    where\r\n        a1_0.application_id=?","traceId":"79a808d5-815f-4acd-8902-ebf0a7982105","correlationId":"79a808d5-815f-4acd-8902-ebf0a7982105","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:39:46.4343807Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        as1_0.application_service_id,\r\n        as1_0.added_date,\r\n        as1_0.application_id,\r\n        as1_0.completed_date,\r\n        as1_0.quantity,\r\n        as1_0.service_id,\r\n        as1_0.status,\r\n        as1_0.tax_amount,\r\n        as1_0.total_price,\r\n        as1_0.unit_price \r\n    from\r\n        application_service as1_0 \r\n    where\r\n        as1_0.application_service_id=?","traceId":"79a808d5-815f-4acd-8902-ebf0a7982105","correlationId":"79a808d5-815f-4acd-8902-ebf0a7982105","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:39:46.4813327Z","@version":"1","level":"DEBUG","message":"\r\n    /* insert for\r\n        com.vfsglobal.bookings.entity.Application */insert \r\n    into\r\n        application (accommodation_details, agent_id, applicant_id, application_type, cancellation_reason, cancelled_by_id, cancelled_date, completed_date, created_by_user_id, created_by_user_type, created_date, currency, current_step, destination_country_id, expiry_date, form_data_json, intended_arrival_date, intended_departure_date, internal_notes, is_draft, paid_amount, priority, reference_number, refunded_amount, sla_due_date, status, sub_status, submission_date, total_fee_amount, total_steps, travel_purpose, updated_date, vac_id, visa_type_id, application_id) \r\n    values\r\n        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","traceId":"79a808d5-815f-4acd-8902-ebf0a7982105","correlationId":"79a808d5-815f-4acd-8902-ebf0a7982105","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:39:47.1080608Z","@version":"1","level":"WARN","message":"SQL Error: 0, SQLState: 23503","traceId":"79a808d5-815f-4acd-8902-ebf0a7982105","correlationId":"79a808d5-815f-4acd-8902-ebf0a7982105","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T13:39:47.1090548Z","@version":"1","level":"ERROR","message":"ERROR: insert or update on table \"application\" violates foreign key constraint \"application_vac_id_fkey\"\n  Detail: Key (vac_id)=(729d8c9a-9f15-47eb-9a32-0c3b6fae97d7) is not present in table \"vac\".","traceId":"79a808d5-815f-4acd-8902-ebf0a7982105","correlationId":"79a808d5-815f-4acd-8902-ebf0a7982105","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T13:39:47.1504313Z","@version":"1","level":"ERROR","message":"Runtime exception occurred","traceId":"79a808d5-815f-4acd-8902-ebf0a7982105","correlationId":"79a808d5-815f-4acd-8902-ebf0a7982105","stack_trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement [ERROR: insert or update on table \"application\" violates foreign key constraint \"application_vac_id_fkey\"\n  Detail: Key (vac_id)=(729d8c9a-9f15-47eb-9a32-0c3b6fae97d7) is not present in table \"vac\".] [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; constraint [application_vac_id_fkey]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\r\n\tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n\tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy161.findByApplicationId(Unknown Source)\r\n\tat com.vfsglobal.bookings.service.BookingService.mapToBookingResponse(BookingService.java:161)\r\n\tat com.vfsglobal.bookings.service.BookingService.createBooking(BookingService.java:87)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat com.vfsglobal.bookings.service.BookingService$$SpringCGLIB$$0.createBooking(<generated>)\r\n\tat com.vfsglobal.bookings.controller.BookingController.createBooking(BookingController.java:28)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat com.vfsglobal.bookings.filter.CorrelationIdFilter.doFilterInternal(CorrelationIdFilter.java:58)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [ERROR: insert or update on table \"application\" violates foreign key constraint \"application_vac_id_fkey\"\n  Detail: Key (vac_id)=(729d8c9a-9f15-47eb-9a32-0c3b6fae97d7) is not present in table \"vac\".] [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:97)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:283)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:107)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:40)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:52)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:171)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2865)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:102)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:631)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:55)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1378)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:107)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:305)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:246)\r\n\tat org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)\r\n\tat org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)\r\n\tat org.hibernate.query.Query.getResultList(Query.java:120)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n\t... 79 common frames omitted\r\nCaused by: org.postgresql.util.PSQLException: ERROR: insert or update on table \"application\" violates foreign key constraint \"application_vac_id_fkey\"\n  Detail: Key (vac_id)=(729d8c9a-9f15-47eb-9a32-0c3b6fae97d7) is not present in table \"vac\".\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:190)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:152)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:280)\r\n\t... 114 common frames omitted\r\n","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T13:39:54.4411158Z","@version":"1","level":"DEBUG","message":"Creating new booking","traceId":"92f23c67-e5c5-4cf4-a455-e3919be61173","correlationId":"92f23c67-e5c5-4cf4-a455-e3919be61173","service":"bookings-service","thread":"http-nio-8093-exec-6","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T13:39:54.4825166Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.applicant_id,\r\n        a1_0.address,\r\n        a1_0.city,\r\n        a1_0.date_of_birth,\r\n        a1_0.email,\r\n        a1_0.first_name,\r\n        a1_0.is_active,\r\n        a1_0.last_name,\r\n        a1_0.middle_name,\r\n        a1_0.passport_expiry_date,\r\n        a1_0.passport_number,\r\n        a1_0.phone,\r\n        a1_0.postal_code,\r\n        a1_0.state \r\n    from\r\n        applicant a1_0 \r\n    where\r\n        a1_0.applicant_id=?","traceId":"92f23c67-e5c5-4cf4-a455-e3919be61173","correlationId":"92f23c67-e5c5-4cf4-a455-e3919be61173","service":"bookings-service","thread":"http-nio-8093-exec-6","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:39:54.7975963Z","@version":"1","level":"DEBUG","message":"Using provided applicant ID: a0100000-0000-0000-0000-000000000001","traceId":"92f23c67-e5c5-4cf4-a455-e3919be61173","correlationId":"92f23c67-e5c5-4cf4-a455-e3919be61173","service":"bookings-service","thread":"http-nio-8093-exec-6","logger":"c.v.bookings.service.BookingService"}
{"@timestamp":"2025-12-09T13:39:54.7996045Z","@version":"1","level":"DEBUG","message":"\r\n    /* SELECT\r\n        vt \r\n    FROM\r\n        VisaType vt \r\n    WHERE\r\n        vt.visaTypeCode = :code \r\n        AND vt.isActive = true */ select\r\n            vt1_0.visa_type_id,\r\n            vt1_0.country_id,\r\n            vt1_0.is_active,\r\n            vt1_0.visa_type_code \r\n        from\r\n            visa_type vt1_0 \r\n        where\r\n            vt1_0.visa_type_code=? \r\n            and vt1_0.is_active=true","traceId":"92f23c67-e5c5-4cf4-a455-e3919be61173","correlationId":"92f23c67-e5c5-4cf4-a455-e3919be61173","service":"bookings-service","thread":"http-nio-8093-exec-6","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:39:54.8469314Z","@version":"1","level":"DEBUG","message":"Found visa type by code: US-B1B2-TOU -> c1000000-0000-0000-0000-000000000005","traceId":"92f23c67-e5c5-4cf4-a455-e3919be61173","correlationId":"92f23c67-e5c5-4cf4-a455-e3919be61173","service":"bookings-service","thread":"http-nio-8093-exec-6","logger":"c.v.bookings.service.BookingService"}
{"@timestamp":"2025-12-09T13:39:54.8479265Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.application_id,\r\n        a1_0.accommodation_details,\r\n        a1_0.agent_id,\r\n        a1_0.applicant_id,\r\n        a1_0.application_type,\r\n        a1_0.cancellation_reason,\r\n        a1_0.cancelled_by_id,\r\n        a1_0.cancelled_date,\r\n        a1_0.completed_date,\r\n        a1_0.created_by_user_id,\r\n        a1_0.created_by_user_type,\r\n        a1_0.created_date,\r\n        a1_0.currency,\r\n        a1_0.current_step,\r\n        a1_0.destination_country_id,\r\n        a1_0.expiry_date,\r\n        a1_0.form_data_json,\r\n        a1_0.intended_arrival_date,\r\n        a1_0.intended_departure_date,\r\n        a1_0.internal_notes,\r\n        a1_0.is_draft,\r\n        a1_0.paid_amount,\r\n        a1_0.priority,\r\n        a1_0.reference_number,\r\n        a1_0.refunded_amount,\r\n        a1_0.sla_due_date,\r\n        a1_0.status,\r\n        a1_0.sub_status,\r\n        a1_0.submission_date,\r\n        a1_0.total_fee_amount,\r\n        a1_0.total_steps,\r\n        a1_0.travel_purpose,\r\n        a1_0.updated_date,\r\n        a1_0.vac_id,\r\n        a1_0.visa_type_id \r\n    from\r\n        application a1_0 \r\n    where\r\n        a1_0.application_id=?","traceId":"92f23c67-e5c5-4cf4-a455-e3919be61173","correlationId":"92f23c67-e5c5-4cf4-a455-e3919be61173","service":"bookings-service","thread":"http-nio-8093-exec-6","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:39:55.4833041Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        as1_0.application_service_id,\r\n        as1_0.added_date,\r\n        as1_0.application_id,\r\n        as1_0.completed_date,\r\n        as1_0.quantity,\r\n        as1_0.service_id,\r\n        as1_0.status,\r\n        as1_0.tax_amount,\r\n        as1_0.total_price,\r\n        as1_0.unit_price \r\n    from\r\n        application_service as1_0 \r\n    where\r\n        as1_0.application_service_id=?","traceId":"92f23c67-e5c5-4cf4-a455-e3919be61173","correlationId":"92f23c67-e5c5-4cf4-a455-e3919be61173","service":"bookings-service","thread":"http-nio-8093-exec-6","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:39:56.1201659Z","@version":"1","level":"DEBUG","message":"\r\n    /* insert for\r\n        com.vfsglobal.bookings.entity.Application */insert \r\n    into\r\n        application (accommodation_details, agent_id, applicant_id, application_type, cancellation_reason, cancelled_by_id, cancelled_date, completed_date, created_by_user_id, created_by_user_type, created_date, currency, current_step, destination_country_id, expiry_date, form_data_json, intended_arrival_date, intended_departure_date, internal_notes, is_draft, paid_amount, priority, reference_number, refunded_amount, sla_due_date, status, sub_status, submission_date, total_fee_amount, total_steps, travel_purpose, updated_date, vac_id, visa_type_id, application_id) \r\n    values\r\n        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","traceId":"92f23c67-e5c5-4cf4-a455-e3919be61173","correlationId":"92f23c67-e5c5-4cf4-a455-e3919be61173","service":"bookings-service","thread":"http-nio-8093-exec-6","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:39:57.3448304Z","@version":"1","level":"WARN","message":"SQL Error: 0, SQLState: 23503","traceId":"92f23c67-e5c5-4cf4-a455-e3919be61173","correlationId":"92f23c67-e5c5-4cf4-a455-e3919be61173","service":"bookings-service","thread":"http-nio-8093-exec-6","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T13:39:57.3458336Z","@version":"1","level":"ERROR","message":"ERROR: insert or update on table \"application\" violates foreign key constraint \"application_vac_id_fkey\"\n  Detail: Key (vac_id)=(dad40e75-7a62-427a-9e4f-0ea3accd54d5) is not present in table \"vac\".","traceId":"92f23c67-e5c5-4cf4-a455-e3919be61173","correlationId":"92f23c67-e5c5-4cf4-a455-e3919be61173","service":"bookings-service","thread":"http-nio-8093-exec-6","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T13:39:57.3977293Z","@version":"1","level":"ERROR","message":"Runtime exception occurred","traceId":"92f23c67-e5c5-4cf4-a455-e3919be61173","correlationId":"92f23c67-e5c5-4cf4-a455-e3919be61173","stack_trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement [ERROR: insert or update on table \"application\" violates foreign key constraint \"application_vac_id_fkey\"\n  Detail: Key (vac_id)=(dad40e75-7a62-427a-9e4f-0ea3accd54d5) is not present in table \"vac\".] [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; SQL [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]; constraint [application_vac_id_fkey]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\r\n\tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n\tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy161.findByApplicationId(Unknown Source)\r\n\tat com.vfsglobal.bookings.service.BookingService.mapToBookingResponse(BookingService.java:161)\r\n\tat com.vfsglobal.bookings.service.BookingService.createBooking(BookingService.java:87)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat com.vfsglobal.bookings.service.BookingService$$SpringCGLIB$$0.createBooking(<generated>)\r\n\tat com.vfsglobal.bookings.controller.BookingController.createBooking(BookingController.java:28)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat com.vfsglobal.bookings.filter.CorrelationIdFilter.doFilterInternal(CorrelationIdFilter.java:58)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [ERROR: insert or update on table \"application\" violates foreign key constraint \"application_vac_id_fkey\"\n  Detail: Key (vac_id)=(dad40e75-7a62-427a-9e4f-0ea3accd54d5) is not present in table \"vac\".] [/* insert for com.vfsglobal.bookings.entity.Application */insert into application (accommodation_details,agent_id,applicant_id,application_type,cancellation_reason,cancelled_by_id,cancelled_date,completed_date,created_by_user_id,created_by_user_type,created_date,currency,current_step,destination_country_id,expiry_date,form_data_json,intended_arrival_date,intended_departure_date,internal_notes,is_draft,paid_amount,priority,reference_number,refunded_amount,sla_due_date,status,sub_status,submission_date,total_fee_amount,total_steps,travel_purpose,updated_date,vac_id,visa_type_id,application_id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)]\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:97)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:283)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:107)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:40)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:52)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:171)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2865)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:102)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:631)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:55)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1378)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:107)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:305)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:246)\r\n\tat org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)\r\n\tat org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)\r\n\tat org.hibernate.query.Query.getResultList(Query.java:120)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n\t... 79 common frames omitted\r\nCaused by: org.postgresql.util.PSQLException: ERROR: insert or update on table \"application\" violates foreign key constraint \"application_vac_id_fkey\"\n  Detail: Key (vac_id)=(dad40e75-7a62-427a-9e4f-0ea3accd54d5) is not present in table \"vac\".\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:190)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:152)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:280)\r\n\t... 114 common frames omitted\r\n","service":"bookings-service","thread":"http-nio-8093-exec-6","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T13:49:30.3525075Z","@version":"1","level":"INFO","message":"Starting BookingsServiceApplication using Java 21.0.6 with PID 2716 (C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service\\target\\classes started by mahalakshmi.gopi in C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:49:30.359078Z","@version":"1","level":"DEBUG","message":"Running with Spring Boot v3.2.0, Spring v6.1.1","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:49:30.3600764Z","@version":"1","level":"INFO","message":"No active profile set, falling back to 1 default profile: \"default\"","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:49:31.2324884Z","@version":"1","level":"INFO","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T13:49:31.2892665Z","@version":"1","level":"INFO","message":"Finished Spring Data repository scanning in 50 ms. Found 5 JPA repository interfaces.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T13:49:32.5719579Z","@version":"1","level":"INFO","message":"Tomcat initialized with port 8093 (http)","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T13:49:32.582958Z","@version":"1","level":"INFO","message":"Starting service [Tomcat]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardService"}
{"@timestamp":"2025-12-09T13:49:32.582958Z","@version":"1","level":"INFO","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardEngine"}
{"@timestamp":"2025-12-09T13:49:32.6724655Z","@version":"1","level":"INFO","message":"Initializing Spring embedded WebApplicationContext","service":"bookings-service","thread":"main","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T13:49:32.6724655Z","@version":"1","level":"INFO","message":"Root WebApplicationContext: initialization completed in 2248 ms","service":"bookings-service","thread":"main","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext"}
{"@timestamp":"2025-12-09T13:49:32.8974898Z","@version":"1","level":"DEBUG","message":"Filter 'correlationIdFilter' configured for use","service":"bookings-service","thread":"main","logger":"c.v.b.filter.CorrelationIdFilter"}
{"@timestamp":"2025-12-09T13:49:33.1280214Z","@version":"1","level":"INFO","message":"HikariPool-1 - Starting...","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T13:49:34.538001Z","@version":"1","level":"INFO","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2e4339c1","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.pool.HikariPool"}
{"@timestamp":"2025-12-09T13:49:34.5399145Z","@version":"1","level":"INFO","message":"HikariPool-1 - Start completed.","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T13:49:34.6619016Z","@version":"1","level":"INFO","message":"Database: jdbc:postgresql://dpg-d4pe89muk2gs73dcir30-a.singapore-postgres.render.com:5432/vams_c1jg (PostgreSQL 18.1)","service":"bookings-service","thread":"main","logger":"org.flywaydb.core.FlywayExecutor"}
{"@timestamp":"2025-12-09T13:49:34.9783369Z","@version":"1","level":"WARN","message":"Flyway upgrade recommended: PostgreSQL 18.1 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 16.","service":"bookings-service","thread":"main","logger":"o.f.c.i.database.base.Database"}
{"@timestamp":"2025-12-09T13:49:35.2374313Z","@version":"1","level":"INFO","message":"Successfully validated 2 migrations (execution time 00:00.204s)","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbValidate"}
{"@timestamp":"2025-12-09T13:49:35.8604028Z","@version":"1","level":"INFO","message":"Current version of schema \"public\": 1","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T13:49:35.9086155Z","@version":"1","level":"INFO","message":"Schema \"public\" is up to date. No migration necessary.","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T13:49:36.3149959Z","@version":"1","level":"INFO","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"bookings-service","thread":"main","logger":"o.h.jpa.internal.util.LogHelper"}
{"@timestamp":"2025-12-09T13:49:36.3885995Z","@version":"1","level":"INFO","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"bookings-service","thread":"main","logger":"org.hibernate.Version"}
{"@timestamp":"2025-12-09T13:49:36.4292514Z","@version":"1","level":"INFO","message":"HHH000026: Second-level cache disabled","service":"bookings-service","thread":"main","logger":"o.h.c.i.RegionFactoryInitiator"}
{"@timestamp":"2025-12-09T13:49:36.6661243Z","@version":"1","level":"INFO","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"bookings-service","thread":"main","logger":"o.s.o.j.p.SpringPersistenceUnitInfo"}
{"@timestamp":"2025-12-09T13:49:36.8102698Z","@version":"1","level":"WARN","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"bookings-service","thread":"main","logger":"org.hibernate.orm.deprecation"}
{"@timestamp":"2025-12-09T13:49:37.7108412Z","@version":"1","level":"INFO","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"bookings-service","thread":"main","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator"}
{"@timestamp":"2025-12-09T13:49:39.3173879Z","@version":"1","level":"INFO","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"bookings-service","thread":"main","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean"}
{"@timestamp":"2025-12-09T13:49:39.7571669Z","@version":"1","level":"INFO","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"bookings-service","thread":"main","logger":"o.s.d.j.r.query.QueryEnhancerFactory"}
{"@timestamp":"2025-12-09T13:49:40.6583406Z","@version":"1","level":"WARN","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"bookings-service","thread":"main","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration"}
{"@timestamp":"2025-12-09T13:49:41.7995751Z","@version":"1","level":"INFO","message":"Exposing 2 endpoint(s) beneath base path '/actuator'","service":"bookings-service","thread":"main","logger":"o.s.b.a.e.web.EndpointLinksResolver"}
{"@timestamp":"2025-12-09T13:49:41.8945772Z","@version":"1","level":"INFO","message":"Tomcat started on port 8093 (http) with context path ''","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T13:49:41.9105776Z","@version":"1","level":"INFO","message":"Started BookingsServiceApplication in 12.321 seconds (process running for 12.791)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:49:49.4636047Z","@version":"1","level":"INFO","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T13:49:49.4651074Z","@version":"1","level":"INFO","message":"Initializing Servlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T13:49:49.4661112Z","@version":"1","level":"INFO","message":"Completed initialization in 1 ms","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T13:49:49.5277034Z","@version":"1","level":"DEBUG","message":"Creating new booking","traceId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","correlationId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T13:49:49.6153564Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.applicant_id,\r\n        a1_0.address,\r\n        a1_0.city,\r\n        a1_0.date_of_birth,\r\n        a1_0.email,\r\n        a1_0.first_name,\r\n        a1_0.is_active,\r\n        a1_0.last_name,\r\n        a1_0.middle_name,\r\n        a1_0.passport_expiry_date,\r\n        a1_0.passport_number,\r\n        a1_0.phone,\r\n        a1_0.postal_code,\r\n        a1_0.state \r\n    from\r\n        applicant a1_0 \r\n    where\r\n        a1_0.applicant_id=?","traceId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","correlationId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:49:49.675747Z","@version":"1","level":"DEBUG","message":"Using provided applicant ID: a0100000-0000-0000-0000-000000000001","traceId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","correlationId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.bookings.service.BookingService"}
{"@timestamp":"2025-12-09T13:49:49.7212555Z","@version":"1","level":"DEBUG","message":"\r\n    /* SELECT\r\n        vt \r\n    FROM\r\n        VisaType vt \r\n    WHERE\r\n        vt.visaTypeCode = :code \r\n        AND vt.isActive = true */ select\r\n            vt1_0.visa_type_id,\r\n            vt1_0.country_id,\r\n            vt1_0.is_active,\r\n            vt1_0.visa_type_code \r\n        from\r\n            visa_type vt1_0 \r\n        where\r\n            vt1_0.visa_type_code=? \r\n            and vt1_0.is_active=true","traceId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","correlationId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:49:49.7742836Z","@version":"1","level":"DEBUG","message":"Found visa type by code: US-B1B2-TOU -> c1000000-0000-0000-0000-000000000005","traceId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","correlationId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.bookings.service.BookingService"}
{"@timestamp":"2025-12-09T13:49:49.7873445Z","@version":"1","level":"DEBUG","message":"\r\n    /* <criteria> */ select\r\n        v1_0.vac_id,\r\n        v1_0.country_id,\r\n        v1_0.is_active,\r\n        v1_0.vac_code \r\n    from\r\n        vac v1_0 \r\n    where\r\n        v1_0.vac_code=?","traceId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","correlationId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:49:49.8336009Z","@version":"1","level":"DEBUG","message":"Found VAC by code: VAC-GBR-LON -> b1000000-0000-0000-0000-000000000007","traceId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","correlationId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.bookings.service.BookingService"}
{"@timestamp":"2025-12-09T13:49:49.841517Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.application_id,\r\n        a1_0.accommodation_details,\r\n        a1_0.agent_id,\r\n        a1_0.applicant_id,\r\n        a1_0.application_type,\r\n        a1_0.cancellation_reason,\r\n        a1_0.cancelled_by_id,\r\n        a1_0.cancelled_date,\r\n        a1_0.completed_date,\r\n        a1_0.created_by_user_id,\r\n        a1_0.created_by_user_type,\r\n        a1_0.created_date,\r\n        a1_0.currency,\r\n        a1_0.current_step,\r\n        a1_0.destination_country_id,\r\n        a1_0.expiry_date,\r\n        a1_0.form_data_json,\r\n        a1_0.intended_arrival_date,\r\n        a1_0.intended_departure_date,\r\n        a1_0.internal_notes,\r\n        a1_0.is_draft,\r\n        a1_0.paid_amount,\r\n        a1_0.priority,\r\n        a1_0.reference_number,\r\n        a1_0.refunded_amount,\r\n        a1_0.sla_due_date,\r\n        a1_0.status,\r\n        a1_0.sub_status,\r\n        a1_0.submission_date,\r\n        a1_0.total_fee_amount,\r\n        a1_0.total_steps,\r\n        a1_0.travel_purpose,\r\n        a1_0.updated_date,\r\n        a1_0.vac_id,\r\n        a1_0.visa_type_id \r\n    from\r\n        application a1_0 \r\n    where\r\n        a1_0.application_id=?","traceId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","correlationId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:49:49.9007334Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        as1_0.application_service_id,\r\n        as1_0.added_date,\r\n        as1_0.application_id,\r\n        as1_0.completed_date,\r\n        as1_0.quantity,\r\n        as1_0.service_id,\r\n        as1_0.status,\r\n        as1_0.tax_amount,\r\n        as1_0.total_price,\r\n        as1_0.unit_price \r\n    from\r\n        application_service as1_0 \r\n    where\r\n        as1_0.application_service_id=?","traceId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","correlationId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:49:49.9955961Z","@version":"1","level":"DEBUG","message":"\r\n    /* insert for\r\n        com.vfsglobal.bookings.entity.Application */insert \r\n    into\r\n        application (accommodation_details, agent_id, applicant_id, application_type, cancellation_reason, cancelled_by_id, cancelled_date, completed_date, created_by_user_id, created_by_user_type, created_date, currency, current_step, destination_country_id, expiry_date, form_data_json, intended_arrival_date, intended_departure_date, internal_notes, is_draft, paid_amount, priority, reference_number, refunded_amount, sla_due_date, status, sub_status, submission_date, total_fee_amount, total_steps, travel_purpose, updated_date, vac_id, visa_type_id, application_id) \r\n    values\r\n        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","traceId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","correlationId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:49:50.0505982Z","@version":"1","level":"DEBUG","message":"\r\n    /* insert for\r\n        com.vfsglobal.bookings.entity.ApplicationService */insert \r\n    into\r\n        application_service (added_date, application_id, completed_date, quantity, service_id, status, tax_amount, total_price, unit_price, application_service_id) \r\n    values\r\n        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","traceId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","correlationId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:49:50.1005328Z","@version":"1","level":"WARN","message":"SQL Error: 0, SQLState: 23503","traceId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","correlationId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T13:49:50.1005328Z","@version":"1","level":"ERROR","message":"ERROR: insert or update on table \"application_service\" violates foreign key constraint \"application_service_service_id_fkey\"\n  Detail: Key (service_id)=(977aa39d-bd4e-4003-8bbe-4e434dc64778) is not present in table \"service_catalog\".","traceId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","correlationId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.h.e.jdbc.spi.SqlExceptionHelper"}
{"@timestamp":"2025-12-09T13:49:50.156911Z","@version":"1","level":"ERROR","message":"Runtime exception occurred","traceId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","correlationId":"f5094ea0-f21b-431e-b147-3c0e3a889de2","stack_trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement [ERROR: insert or update on table \"application_service\" violates foreign key constraint \"application_service_service_id_fkey\"\n  Detail: Key (service_id)=(977aa39d-bd4e-4003-8bbe-4e434dc64778) is not present in table \"service_catalog\".] [/* insert for com.vfsglobal.bookings.entity.ApplicationService */insert into application_service (added_date,application_id,completed_date,quantity,service_id,status,tax_amount,total_price,unit_price,application_service_id) values (?,?,?,?,?,?,?,?,?,?)]; SQL [/* insert for com.vfsglobal.bookings.entity.ApplicationService */insert into application_service (added_date,application_id,completed_date,quantity,service_id,status,tax_amount,total_price,unit_price,application_service_id) values (?,?,?,?,?,?,?,?,?,?)]; constraint [application_service_service_id_fkey]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\r\n\tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n\tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy161.findByApplicationId(Unknown Source)\r\n\tat com.vfsglobal.bookings.service.BookingService.mapToBookingResponse(BookingService.java:164)\r\n\tat com.vfsglobal.bookings.service.BookingService.createBooking(BookingService.java:90)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)\r\n\tat com.vfsglobal.bookings.service.BookingService$$SpringCGLIB$$0.createBooking(<generated>)\r\n\tat com.vfsglobal.bookings.controller.BookingController.createBooking(BookingController.java:28)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat com.vfsglobal.bookings.filter.CorrelationIdFilter.doFilterInternal(CorrelationIdFilter.java:58)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [ERROR: insert or update on table \"application_service\" violates foreign key constraint \"application_service_service_id_fkey\"\n  Detail: Key (service_id)=(977aa39d-bd4e-4003-8bbe-4e434dc64778) is not present in table \"service_catalog\".] [/* insert for com.vfsglobal.bookings.entity.ApplicationService */insert into application_service (added_date,application_id,completed_date,quantity,service_id,status,tax_amount,total_price,unit_price,application_service_id) values (?,?,?,?,?,?,?,?,?,?)]\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:97)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:283)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:107)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:40)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:52)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:171)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2865)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:102)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:631)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:498)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:363)\r\n\tat org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:55)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1378)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$0(ConcreteSqmSelectQueryPlan.java:107)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:305)\r\n\tat org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:246)\r\n\tat org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)\r\n\tat org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)\r\n\tat org.hibernate.query.Query.getResultList(Query.java:120)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n\t... 79 common frames omitted\r\nCaused by: org.postgresql.util.PSQLException: ERROR: insert or update on table \"application_service\" violates foreign key constraint \"application_service_service_id_fkey\"\n  Detail: Key (service_id)=(977aa39d-bd4e-4003-8bbe-4e434dc64778) is not present in table \"service_catalog\".\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:190)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:152)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:280)\r\n\t... 114 common frames omitted\r\n","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T13:53:03.20435Z","@version":"1","level":"INFO","message":"Starting BookingsServiceApplication using Java 21.0.6 with PID 26632 (C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service\\target\\classes started by mahalakshmi.gopi in C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:53:03.2103468Z","@version":"1","level":"DEBUG","message":"Running with Spring Boot v3.2.0, Spring v6.1.1","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:53:03.2113473Z","@version":"1","level":"INFO","message":"No active profile set, falling back to 1 default profile: \"default\"","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:53:03.9645462Z","@version":"1","level":"INFO","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T13:53:04.0285439Z","@version":"1","level":"INFO","message":"Finished Spring Data repository scanning in 57 ms. Found 6 JPA repository interfaces.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T13:53:05.3389927Z","@version":"1","level":"INFO","message":"Tomcat initialized with port 8093 (http)","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T13:53:05.3489914Z","@version":"1","level":"INFO","message":"Starting service [Tomcat]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardService"}
{"@timestamp":"2025-12-09T13:53:05.3499923Z","@version":"1","level":"INFO","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardEngine"}
{"@timestamp":"2025-12-09T13:53:05.437153Z","@version":"1","level":"INFO","message":"Initializing Spring embedded WebApplicationContext","service":"bookings-service","thread":"main","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T13:53:05.437153Z","@version":"1","level":"INFO","message":"Root WebApplicationContext: initialization completed in 2174 ms","service":"bookings-service","thread":"main","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext"}
{"@timestamp":"2025-12-09T13:53:05.664064Z","@version":"1","level":"DEBUG","message":"Filter 'correlationIdFilter' configured for use","service":"bookings-service","thread":"main","logger":"c.v.b.filter.CorrelationIdFilter"}
{"@timestamp":"2025-12-09T13:53:05.8922781Z","@version":"1","level":"INFO","message":"HikariPool-1 - Starting...","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T13:53:09.3839082Z","@version":"1","level":"INFO","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1c2b65cc","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.pool.HikariPool"}
{"@timestamp":"2025-12-09T13:53:09.3858658Z","@version":"1","level":"INFO","message":"HikariPool-1 - Start completed.","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T13:53:09.9028023Z","@version":"1","level":"INFO","message":"Database: jdbc:postgresql://dpg-d4pe89muk2gs73dcir30-a.singapore-postgres.render.com:5432/vams_c1jg (PostgreSQL 18.1)","service":"bookings-service","thread":"main","logger":"org.flywaydb.core.FlywayExecutor"}
{"@timestamp":"2025-12-09T13:53:10.5426054Z","@version":"1","level":"WARN","message":"Flyway upgrade recommended: PostgreSQL 18.1 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 16.","service":"bookings-service","thread":"main","logger":"o.f.c.i.database.base.Database"}
{"@timestamp":"2025-12-09T13:53:11.1770147Z","@version":"1","level":"INFO","message":"Successfully validated 2 migrations (execution time 00:00.514s)","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbValidate"}
{"@timestamp":"2025-12-09T13:53:12.2146915Z","@version":"1","level":"INFO","message":"Current version of schema \"public\": 1","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T13:53:12.2668221Z","@version":"1","level":"INFO","message":"Schema \"public\" is up to date. No migration necessary.","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T13:53:12.7604643Z","@version":"1","level":"INFO","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"bookings-service","thread":"main","logger":"o.h.jpa.internal.util.LogHelper"}
{"@timestamp":"2025-12-09T13:53:12.8230437Z","@version":"1","level":"INFO","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"bookings-service","thread":"main","logger":"org.hibernate.Version"}
{"@timestamp":"2025-12-09T13:53:12.8615568Z","@version":"1","level":"INFO","message":"HHH000026: Second-level cache disabled","service":"bookings-service","thread":"main","logger":"o.h.c.i.RegionFactoryInitiator"}
{"@timestamp":"2025-12-09T13:53:13.101117Z","@version":"1","level":"INFO","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"bookings-service","thread":"main","logger":"o.s.o.j.p.SpringPersistenceUnitInfo"}
{"@timestamp":"2025-12-09T13:53:13.2965897Z","@version":"1","level":"WARN","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"bookings-service","thread":"main","logger":"org.hibernate.orm.deprecation"}
{"@timestamp":"2025-12-09T13:53:14.5293403Z","@version":"1","level":"INFO","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"bookings-service","thread":"main","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator"}
{"@timestamp":"2025-12-09T13:53:16.5780438Z","@version":"1","level":"INFO","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"bookings-service","thread":"main","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean"}
{"@timestamp":"2025-12-09T13:53:16.9272586Z","@version":"1","level":"INFO","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"bookings-service","thread":"main","logger":"o.s.d.j.r.query.QueryEnhancerFactory"}
{"@timestamp":"2025-12-09T13:53:17.9039727Z","@version":"1","level":"WARN","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"bookings-service","thread":"main","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration"}
{"@timestamp":"2025-12-09T13:53:18.8289378Z","@version":"1","level":"INFO","message":"Exposing 2 endpoint(s) beneath base path '/actuator'","service":"bookings-service","thread":"main","logger":"o.s.b.a.e.web.EndpointLinksResolver"}
{"@timestamp":"2025-12-09T13:53:18.9187526Z","@version":"1","level":"INFO","message":"Tomcat started on port 8093 (http) with context path ''","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T13:53:18.9347506Z","@version":"1","level":"INFO","message":"Started BookingsServiceApplication in 16.447 seconds (process running for 16.878)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T13:53:34.0509696Z","@version":"1","level":"INFO","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T13:53:34.0519699Z","@version":"1","level":"INFO","message":"Initializing Servlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T13:53:34.052971Z","@version":"1","level":"INFO","message":"Completed initialization in 1 ms","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T13:53:34.1270316Z","@version":"1","level":"DEBUG","message":"Creating new booking","traceId":"f8ea1f12-4948-4117-b483-3a438decca59","correlationId":"f8ea1f12-4948-4117-b483-3a438decca59","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T13:53:34.2530324Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.applicant_id,\r\n        a1_0.address,\r\n        a1_0.city,\r\n        a1_0.date_of_birth,\r\n        a1_0.email,\r\n        a1_0.first_name,\r\n        a1_0.is_active,\r\n        a1_0.last_name,\r\n        a1_0.middle_name,\r\n        a1_0.passport_expiry_date,\r\n        a1_0.passport_number,\r\n        a1_0.phone,\r\n        a1_0.postal_code,\r\n        a1_0.state \r\n    from\r\n        applicant a1_0 \r\n    where\r\n        a1_0.applicant_id=?","traceId":"f8ea1f12-4948-4117-b483-3a438decca59","correlationId":"f8ea1f12-4948-4117-b483-3a438decca59","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:53:34.3437757Z","@version":"1","level":"DEBUG","message":"Using provided applicant ID: a0100000-0000-0000-0000-000000000001","traceId":"f8ea1f12-4948-4117-b483-3a438decca59","correlationId":"f8ea1f12-4948-4117-b483-3a438decca59","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"c.v.bookings.service.BookingService"}
{"@timestamp":"2025-12-09T13:53:34.3923171Z","@version":"1","level":"DEBUG","message":"\r\n    /* SELECT\r\n        vt \r\n    FROM\r\n        VisaType vt \r\n    WHERE\r\n        vt.visaTypeCode = :code \r\n        AND vt.isActive = true */ select\r\n            vt1_0.visa_type_id,\r\n            vt1_0.country_id,\r\n            vt1_0.is_active,\r\n            vt1_0.visa_type_code \r\n        from\r\n            visa_type vt1_0 \r\n        where\r\n            vt1_0.visa_type_code=? \r\n            and vt1_0.is_active=true","traceId":"f8ea1f12-4948-4117-b483-3a438decca59","correlationId":"f8ea1f12-4948-4117-b483-3a438decca59","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:53:34.4465278Z","@version":"1","level":"DEBUG","message":"Found visa type by code: US-B1B2-TOU -> c1000000-0000-0000-0000-000000000005","traceId":"f8ea1f12-4948-4117-b483-3a438decca59","correlationId":"f8ea1f12-4948-4117-b483-3a438decca59","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"c.v.bookings.service.BookingService"}
{"@timestamp":"2025-12-09T13:53:34.4594401Z","@version":"1","level":"DEBUG","message":"\r\n    /* <criteria> */ select\r\n        v1_0.vac_id,\r\n        v1_0.country_id,\r\n        v1_0.is_active,\r\n        v1_0.vac_code \r\n    from\r\n        vac v1_0 \r\n    where\r\n        v1_0.vac_code=?","traceId":"f8ea1f12-4948-4117-b483-3a438decca59","correlationId":"f8ea1f12-4948-4117-b483-3a438decca59","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:53:34.5414785Z","@version":"1","level":"DEBUG","message":"Found VAC by code: VAC-GBR-LON -> b1000000-0000-0000-0000-000000000007","traceId":"f8ea1f12-4948-4117-b483-3a438decca59","correlationId":"f8ea1f12-4948-4117-b483-3a438decca59","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"c.v.bookings.service.BookingService"}
{"@timestamp":"2025-12-09T13:53:34.548479Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.application_id,\r\n        a1_0.accommodation_details,\r\n        a1_0.agent_id,\r\n        a1_0.applicant_id,\r\n        a1_0.application_type,\r\n        a1_0.cancellation_reason,\r\n        a1_0.cancelled_by_id,\r\n        a1_0.cancelled_date,\r\n        a1_0.completed_date,\r\n        a1_0.created_by_user_id,\r\n        a1_0.created_by_user_type,\r\n        a1_0.created_date,\r\n        a1_0.currency,\r\n        a1_0.current_step,\r\n        a1_0.destination_country_id,\r\n        a1_0.expiry_date,\r\n        a1_0.form_data_json,\r\n        a1_0.intended_arrival_date,\r\n        a1_0.intended_departure_date,\r\n        a1_0.internal_notes,\r\n        a1_0.is_draft,\r\n        a1_0.paid_amount,\r\n        a1_0.priority,\r\n        a1_0.reference_number,\r\n        a1_0.refunded_amount,\r\n        a1_0.sla_due_date,\r\n        a1_0.status,\r\n        a1_0.sub_status,\r\n        a1_0.submission_date,\r\n        a1_0.total_fee_amount,\r\n        a1_0.total_steps,\r\n        a1_0.travel_purpose,\r\n        a1_0.updated_date,\r\n        a1_0.vac_id,\r\n        a1_0.visa_type_id \r\n    from\r\n        application a1_0 \r\n    where\r\n        a1_0.application_id=?","traceId":"f8ea1f12-4948-4117-b483-3a438decca59","correlationId":"f8ea1f12-4948-4117-b483-3a438decca59","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:53:34.6169236Z","@version":"1","level":"DEBUG","message":"\r\n    /* SELECT\r\n        s \r\n    FROM\r\n        ServiceCatalog s \r\n    WHERE\r\n        s.serviceCode = :code \r\n        AND s.isActive = true */ select\r\n            sc1_0.service_id,\r\n            sc1_0.base_price,\r\n            sc1_0.currency,\r\n            sc1_0.is_active,\r\n            sc1_0.service_code,\r\n            sc1_0.tax_rate \r\n        from\r\n            service_catalog sc1_0 \r\n        where\r\n            sc1_0.service_code=? \r\n            and sc1_0.is_active=true","traceId":"f8ea1f12-4948-4117-b483-3a438decca59","correlationId":"f8ea1f12-4948-4117-b483-3a438decca59","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:53:34.8369955Z","@version":"1","level":"DEBUG","message":"Found service by code: VAS-KEEP-PASSPORT -> d1000000-0000-0000-0000-000000000014 (price: 55.00)","traceId":"f8ea1f12-4948-4117-b483-3a438decca59","correlationId":"f8ea1f12-4948-4117-b483-3a438decca59","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"c.v.bookings.service.BookingService"}
{"@timestamp":"2025-12-09T13:53:34.8389962Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        as1_0.application_service_id,\r\n        as1_0.added_date,\r\n        as1_0.application_id,\r\n        as1_0.completed_date,\r\n        as1_0.quantity,\r\n        as1_0.service_id,\r\n        as1_0.status,\r\n        as1_0.tax_amount,\r\n        as1_0.total_price,\r\n        as1_0.unit_price \r\n    from\r\n        application_service as1_0 \r\n    where\r\n        as1_0.application_service_id=?","traceId":"f8ea1f12-4948-4117-b483-3a438decca59","correlationId":"f8ea1f12-4948-4117-b483-3a438decca59","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:53:35.0778046Z","@version":"1","level":"DEBUG","message":"\r\n    /* insert for\r\n        com.vfsglobal.bookings.entity.Application */insert \r\n    into\r\n        application (accommodation_details, agent_id, applicant_id, application_type, cancellation_reason, cancelled_by_id, cancelled_date, completed_date, created_by_user_id, created_by_user_type, created_date, currency, current_step, destination_country_id, expiry_date, form_data_json, intended_arrival_date, intended_departure_date, internal_notes, is_draft, paid_amount, priority, reference_number, refunded_amount, sla_due_date, status, sub_status, submission_date, total_fee_amount, total_steps, travel_purpose, updated_date, vac_id, visa_type_id, application_id) \r\n    values\r\n        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","traceId":"f8ea1f12-4948-4117-b483-3a438decca59","correlationId":"f8ea1f12-4948-4117-b483-3a438decca59","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:53:35.2659624Z","@version":"1","level":"DEBUG","message":"\r\n    /* insert for\r\n        com.vfsglobal.bookings.entity.ApplicationService */insert \r\n    into\r\n        application_service (added_date, application_id, completed_date, quantity, service_id, status, tax_amount, total_price, unit_price, application_service_id) \r\n    values\r\n        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","traceId":"f8ea1f12-4948-4117-b483-3a438decca59","correlationId":"f8ea1f12-4948-4117-b483-3a438decca59","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T13:53:35.349627Z","@version":"1","level":"DEBUG","message":"\r\n    /* <criteria> */ select\r\n        as1_0.application_service_id,\r\n        as1_0.added_date,\r\n        as1_0.application_id,\r\n        as1_0.completed_date,\r\n        as1_0.quantity,\r\n        as1_0.service_id,\r\n        as1_0.status,\r\n        as1_0.tax_amount,\r\n        as1_0.total_price,\r\n        as1_0.unit_price \r\n    from\r\n        application_service as1_0 \r\n    where\r\n        as1_0.application_id=?","traceId":"f8ea1f12-4948-4117-b483-3a438decca59","correlationId":"f8ea1f12-4948-4117-b483-3a438decca59","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T14:13:34.0086252Z","@version":"1","level":"INFO","message":"Starting BookingsServiceApplication using Java 21.0.6 with PID 16792 (C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service\\target\\classes started by mahalakshmi.gopi in C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T14:13:34.0166302Z","@version":"1","level":"DEBUG","message":"Running with Spring Boot v3.2.0, Spring v6.1.1","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T14:13:34.0176298Z","@version":"1","level":"INFO","message":"No active profile set, falling back to 1 default profile: \"default\"","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T14:13:35.016651Z","@version":"1","level":"INFO","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T14:13:35.0969835Z","@version":"1","level":"INFO","message":"Finished Spring Data repository scanning in 70 ms. Found 8 JPA repository interfaces.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T14:13:36.5041607Z","@version":"1","level":"INFO","message":"Tomcat initialized with port 8093 (http)","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T14:13:36.5181554Z","@version":"1","level":"INFO","message":"Starting service [Tomcat]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardService"}
{"@timestamp":"2025-12-09T14:13:36.5181554Z","@version":"1","level":"INFO","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardEngine"}
{"@timestamp":"2025-12-09T14:13:36.6246662Z","@version":"1","level":"INFO","message":"Initializing Spring embedded WebApplicationContext","service":"bookings-service","thread":"main","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T14:13:36.6256658Z","@version":"1","level":"INFO","message":"Root WebApplicationContext: initialization completed in 2544 ms","service":"bookings-service","thread":"main","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext"}
{"@timestamp":"2025-12-09T14:13:36.9106275Z","@version":"1","level":"DEBUG","message":"Filter 'correlationIdFilter' configured for use","service":"bookings-service","thread":"main","logger":"c.v.b.filter.CorrelationIdFilter"}
{"@timestamp":"2025-12-09T14:13:37.1773302Z","@version":"1","level":"INFO","message":"HikariPool-1 - Starting...","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T14:13:43.546923Z","@version":"1","level":"INFO","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2e62e227","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.pool.HikariPool"}
{"@timestamp":"2025-12-09T14:13:43.5488477Z","@version":"1","level":"INFO","message":"HikariPool-1 - Start completed.","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T14:13:44.0368142Z","@version":"1","level":"INFO","message":"Database: jdbc:postgresql://dpg-d4pe89muk2gs73dcir30-a.singapore-postgres.render.com:5432/vams_c1jg (PostgreSQL 18.1)","service":"bookings-service","thread":"main","logger":"org.flywaydb.core.FlywayExecutor"}
{"@timestamp":"2025-12-09T14:13:49.1450529Z","@version":"1","level":"WARN","message":"Flyway upgrade recommended: PostgreSQL 18.1 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 16.","service":"bookings-service","thread":"main","logger":"o.f.c.i.database.base.Database"}
{"@timestamp":"2025-12-09T14:13:51.9786696Z","@version":"1","level":"INFO","message":"Successfully validated 2 migrations (execution time 00:02.595s)","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbValidate"}
{"@timestamp":"2025-12-09T14:14:00.4972383Z","@version":"1","level":"INFO","message":"Current version of schema \"public\": 1","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T14:14:00.770019Z","@version":"1","level":"INFO","message":"Schema \"public\" is up to date. No migration necessary.","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T14:14:06.7049227Z","@version":"1","level":"INFO","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"bookings-service","thread":"main","logger":"o.h.jpa.internal.util.LogHelper"}
{"@timestamp":"2025-12-09T14:14:06.8015845Z","@version":"1","level":"INFO","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"bookings-service","thread":"main","logger":"org.hibernate.Version"}
{"@timestamp":"2025-12-09T14:14:06.8716072Z","@version":"1","level":"INFO","message":"HHH000026: Second-level cache disabled","service":"bookings-service","thread":"main","logger":"o.h.c.i.RegionFactoryInitiator"}
{"@timestamp":"2025-12-09T14:14:07.2249833Z","@version":"1","level":"INFO","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"bookings-service","thread":"main","logger":"o.s.o.j.p.SpringPersistenceUnitInfo"}
{"@timestamp":"2025-12-09T14:14:09.0344683Z","@version":"1","level":"WARN","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"bookings-service","thread":"main","logger":"org.hibernate.orm.deprecation"}
{"@timestamp":"2025-12-09T14:14:10.8148598Z","@version":"1","level":"INFO","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"bookings-service","thread":"main","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator"}
{"@timestamp":"2025-12-09T14:14:55.4048798Z","@version":"1","level":"INFO","message":"Starting BookingsServiceApplication using Java 21.0.6 with PID 24252 (C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service\\target\\classes started by mahalakshmi.gopi in C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T14:14:55.4108786Z","@version":"1","level":"DEBUG","message":"Running with Spring Boot v3.2.0, Spring v6.1.1","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T14:14:55.41188Z","@version":"1","level":"INFO","message":"No active profile set, falling back to 1 default profile: \"default\"","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T14:14:56.2711092Z","@version":"1","level":"INFO","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T14:14:56.3390917Z","@version":"1","level":"INFO","message":"Finished Spring Data repository scanning in 61 ms. Found 8 JPA repository interfaces.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T14:14:57.6623988Z","@version":"1","level":"INFO","message":"Tomcat initialized with port 8093 (http)","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T14:14:57.6723995Z","@version":"1","level":"INFO","message":"Starting service [Tomcat]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardService"}
{"@timestamp":"2025-12-09T14:14:57.6733991Z","@version":"1","level":"INFO","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardEngine"}
{"@timestamp":"2025-12-09T14:14:57.8509021Z","@version":"1","level":"INFO","message":"Initializing Spring embedded WebApplicationContext","service":"bookings-service","thread":"main","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T14:14:57.8509021Z","@version":"1","level":"INFO","message":"Root WebApplicationContext: initialization completed in 2387 ms","service":"bookings-service","thread":"main","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext"}
{"@timestamp":"2025-12-09T14:14:58.0899565Z","@version":"1","level":"DEBUG","message":"Filter 'correlationIdFilter' configured for use","service":"bookings-service","thread":"main","logger":"c.v.b.filter.CorrelationIdFilter"}
{"@timestamp":"2025-12-09T14:14:58.3286142Z","@version":"1","level":"INFO","message":"HikariPool-1 - Starting...","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T14:15:08.0849657Z","@version":"1","level":"INFO","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5fafa76d","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.pool.HikariPool"}
{"@timestamp":"2025-12-09T14:15:08.0870139Z","@version":"1","level":"INFO","message":"HikariPool-1 - Start completed.","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T14:15:09.0575386Z","@version":"1","level":"INFO","message":"Database: jdbc:postgresql://dpg-d4pe89muk2gs73dcir30-a.singapore-postgres.render.com:5432/vams_c1jg (PostgreSQL 18.1)","service":"bookings-service","thread":"main","logger":"org.flywaydb.core.FlywayExecutor"}
{"@timestamp":"2025-12-09T14:15:12.446665Z","@version":"1","level":"WARN","message":"Flyway upgrade recommended: PostgreSQL 18.1 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 16.","service":"bookings-service","thread":"main","logger":"o.f.c.i.database.base.Database"}
{"@timestamp":"2025-12-09T14:15:18.4927658Z","@version":"1","level":"INFO","message":"Successfully validated 2 migrations (execution time 00:05.562s)","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbValidate"}
{"@timestamp":"2025-12-09T14:15:26.0101877Z","@version":"1","level":"INFO","message":"Current version of schema \"public\": 1","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T14:15:26.4369256Z","@version":"1","level":"INFO","message":"Schema \"public\" is up to date. No migration necessary.","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T14:15:29.7681527Z","@version":"1","level":"INFO","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"bookings-service","thread":"main","logger":"o.h.jpa.internal.util.LogHelper"}
{"@timestamp":"2025-12-09T14:15:29.8258498Z","@version":"1","level":"INFO","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"bookings-service","thread":"main","logger":"org.hibernate.Version"}
{"@timestamp":"2025-12-09T14:15:29.869368Z","@version":"1","level":"INFO","message":"HHH000026: Second-level cache disabled","service":"bookings-service","thread":"main","logger":"o.h.c.i.RegionFactoryInitiator"}
{"@timestamp":"2025-12-09T14:15:30.1108898Z","@version":"1","level":"INFO","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"bookings-service","thread":"main","logger":"o.s.o.j.p.SpringPersistenceUnitInfo"}
{"@timestamp":"2025-12-09T14:15:32.3439433Z","@version":"1","level":"WARN","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"bookings-service","thread":"main","logger":"org.hibernate.orm.deprecation"}
{"@timestamp":"2025-12-09T14:15:34.7382372Z","@version":"1","level":"INFO","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"bookings-service","thread":"main","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator"}
{"@timestamp":"2025-12-09T14:16:31.8751386Z","@version":"1","level":"INFO","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"bookings-service","thread":"main","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean"}
{"@timestamp":"2025-12-09T14:16:32.4412213Z","@version":"1","level":"INFO","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"bookings-service","thread":"main","logger":"o.s.d.j.r.query.QueryEnhancerFactory"}
{"@timestamp":"2025-12-09T14:16:33.5628525Z","@version":"1","level":"WARN","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"bookings-service","thread":"main","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration"}
{"@timestamp":"2025-12-09T14:16:34.5331344Z","@version":"1","level":"INFO","message":"Exposing 2 endpoint(s) beneath base path '/actuator'","service":"bookings-service","thread":"main","logger":"o.s.b.a.e.web.EndpointLinksResolver"}
{"@timestamp":"2025-12-09T14:16:34.6797627Z","@version":"1","level":"INFO","message":"Tomcat started on port 8093 (http) with context path ''","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T14:16:34.7048716Z","@version":"1","level":"INFO","message":"Started BookingsServiceApplication in 100.015 seconds (process running for 100.466)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T14:16:42.0152242Z","@version":"1","level":"INFO","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T14:16:42.0152242Z","@version":"1","level":"INFO","message":"Initializing Servlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T14:16:42.0172251Z","@version":"1","level":"INFO","message":"Completed initialization in 2 ms","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T14:16:42.0832197Z","@version":"1","level":"DEBUG","message":"Creating new booking","traceId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","correlationId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T14:16:42.5605377Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.applicant_id,\r\n        a1_0.address,\r\n        a1_0.city,\r\n        a1_0.date_of_birth,\r\n        a1_0.email,\r\n        a1_0.first_name,\r\n        a1_0.is_active,\r\n        a1_0.last_name,\r\n        a1_0.middle_name,\r\n        a1_0.passport_expiry_date,\r\n        a1_0.passport_number,\r\n        a1_0.phone,\r\n        a1_0.postal_code,\r\n        a1_0.state \r\n    from\r\n        applicant a1_0 \r\n    where\r\n        a1_0.applicant_id=?","traceId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","correlationId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T14:16:43.115966Z","@version":"1","level":"DEBUG","message":"Using provided applicant ID: a0100000-0000-0000-0000-000000000001","traceId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","correlationId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.bookings.service.BookingService"}
{"@timestamp":"2025-12-09T14:16:43.2248177Z","@version":"1","level":"DEBUG","message":"\r\n    /* SELECT\r\n        vt \r\n    FROM\r\n        VisaType vt \r\n    WHERE\r\n        vt.visaTypeCode = :code \r\n        AND vt.isActive = true */ select\r\n            vt1_0.visa_type_id,\r\n            vt1_0.base_fee,\r\n            vt1_0.country_id,\r\n            vt1_0.is_active,\r\n            vt1_0.visa_type_code,\r\n            vt1_0.visa_type_name \r\n        from\r\n            visa_type vt1_0 \r\n        where\r\n            vt1_0.visa_type_code=? \r\n            and vt1_0.is_active=true","traceId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","correlationId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T14:16:53.9209543Z","@version":"1","level":"DEBUG","message":"Found visa type by code: US-B1B2-TOU -> c1000000-0000-0000-0000-000000000005","traceId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","correlationId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.bookings.service.BookingService"}
{"@timestamp":"2025-12-09T14:16:53.9352456Z","@version":"1","level":"DEBUG","message":"\r\n    /* <criteria> */ select\r\n        v1_0.vac_id,\r\n        v1_0.country_id,\r\n        v1_0.is_active,\r\n        v1_0.vac_code,\r\n        v1_0.vac_name \r\n    from\r\n        vac v1_0 \r\n    where\r\n        v1_0.vac_code=?","traceId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","correlationId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T14:16:55.4520174Z","@version":"1","level":"DEBUG","message":"Found VAC by code: VAC-GBR-LON -> b1000000-0000-0000-0000-000000000007","traceId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","correlationId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.bookings.service.BookingService"}
{"@timestamp":"2025-12-09T14:16:55.4578601Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        a1_0.application_id,\r\n        a1_0.accommodation_details,\r\n        a1_0.agent_id,\r\n        a1_0.applicant_id,\r\n        a1_0.application_type,\r\n        a1_0.cancellation_reason,\r\n        a1_0.cancelled_by_id,\r\n        a1_0.cancelled_date,\r\n        a1_0.completed_date,\r\n        a1_0.created_by_user_id,\r\n        a1_0.created_by_user_type,\r\n        a1_0.created_date,\r\n        a1_0.currency,\r\n        a1_0.current_step,\r\n        a1_0.destination_country_id,\r\n        a1_0.expiry_date,\r\n        a1_0.form_data_json,\r\n        a1_0.intended_arrival_date,\r\n        a1_0.intended_departure_date,\r\n        a1_0.internal_notes,\r\n        a1_0.is_draft,\r\n        a1_0.paid_amount,\r\n        a1_0.priority,\r\n        a1_0.reference_number,\r\n        a1_0.refunded_amount,\r\n        a1_0.sla_due_date,\r\n        a1_0.status,\r\n        a1_0.sub_status,\r\n        a1_0.submission_date,\r\n        a1_0.total_fee_amount,\r\n        a1_0.total_steps,\r\n        a1_0.travel_purpose,\r\n        a1_0.updated_date,\r\n        a1_0.vac_id,\r\n        a1_0.visa_type_id \r\n    from\r\n        application a1_0 \r\n    where\r\n        a1_0.application_id=?","traceId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","correlationId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T14:16:55.8943899Z","@version":"1","level":"DEBUG","message":"\r\n    /* SELECT\r\n        s \r\n    FROM\r\n        ServiceCatalog s \r\n    WHERE\r\n        s.serviceCode = :code \r\n        AND s.isActive = true */ select\r\n            sc1_0.service_id,\r\n            sc1_0.base_price,\r\n            sc1_0.currency,\r\n            sc1_0.is_active,\r\n            sc1_0.service_code,\r\n            sc1_0.service_name,\r\n            sc1_0.tax_rate \r\n        from\r\n            service_catalog sc1_0 \r\n        where\r\n            sc1_0.service_code=? \r\n            and sc1_0.is_active=true","traceId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","correlationId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T14:16:56.3211772Z","@version":"1","level":"DEBUG","message":"Found service by code: VAS-KEEP-PASSPORT -> d1000000-0000-0000-0000-000000000014 (price: 55.00)","traceId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","correlationId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.bookings.service.BookingService"}
{"@timestamp":"2025-12-09T14:16:56.3240879Z","@version":"1","level":"DEBUG","message":"\r\n    select\r\n        as1_0.application_service_id,\r\n        as1_0.added_date,\r\n        as1_0.application_id,\r\n        as1_0.completed_date,\r\n        as1_0.quantity,\r\n        as1_0.service_id,\r\n        as1_0.status,\r\n        as1_0.tax_amount,\r\n        as1_0.total_price,\r\n        as1_0.unit_price \r\n    from\r\n        application_service as1_0 \r\n    where\r\n        as1_0.application_service_id=?","traceId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","correlationId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T14:16:56.7722089Z","@version":"1","level":"DEBUG","message":"\r\n    /* <criteria> */ select\r\n        a1_0.appointment_id,\r\n        a1_0.application_id,\r\n        a1_0.appointment_date,\r\n        a1_0.appointment_time \r\n    from\r\n        appointment a1_0 \r\n    where\r\n        a1_0.application_id=?","traceId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","correlationId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T14:16:57.3765897Z","@version":"1","level":"DEBUG","message":"\r\n    /* <criteria> */ select\r\n        p1_0.payment_id,\r\n        p1_0.application_id,\r\n        p1_0.payment_mode,\r\n        p1_0.status \r\n    from\r\n        payment p1_0 \r\n    where\r\n        p1_0.application_id=?","traceId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","correlationId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T14:16:57.9042575Z","@version":"1","level":"DEBUG","message":"\r\n    /* insert for\r\n        com.vfsglobal.bookings.entity.Application */insert \r\n    into\r\n        application (accommodation_details, agent_id, applicant_id, application_type, cancellation_reason, cancelled_by_id, cancelled_date, completed_date, created_by_user_id, created_by_user_type, created_date, currency, current_step, destination_country_id, expiry_date, form_data_json, intended_arrival_date, intended_departure_date, internal_notes, is_draft, paid_amount, priority, reference_number, refunded_amount, sla_due_date, status, sub_status, submission_date, total_fee_amount, total_steps, travel_purpose, updated_date, vac_id, visa_type_id, application_id) \r\n    values\r\n        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","traceId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","correlationId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T14:16:59.0459028Z","@version":"1","level":"DEBUG","message":"\r\n    /* insert for\r\n        com.vfsglobal.bookings.entity.ApplicationService */insert \r\n    into\r\n        application_service (added_date, application_id, completed_date, quantity, service_id, status, tax_amount, total_price, unit_price, application_service_id) \r\n    values\r\n        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","traceId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","correlationId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T14:16:59.4955257Z","@version":"1","level":"DEBUG","message":"\r\n    /* <criteria> */ select\r\n        as1_0.application_service_id,\r\n        as1_0.added_date,\r\n        as1_0.application_id,\r\n        as1_0.completed_date,\r\n        as1_0.quantity,\r\n        as1_0.service_id,\r\n        as1_0.status,\r\n        as1_0.tax_amount,\r\n        as1_0.total_price,\r\n        as1_0.unit_price \r\n    from\r\n        application_service as1_0 \r\n    where\r\n        as1_0.application_id=?","traceId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","correlationId":"cbabd902-cc67-4ab0-b116-6bed462a6b0d","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"org.hibernate.SQL"}
{"@timestamp":"2025-12-09T14:22:46.7228995Z","@version":"1","level":"DEBUG","message":"Listing bookings with filters","traceId":"4d1595c7-10d9-4150-b94b-21549855ab24","correlationId":"4d1595c7-10d9-4150-b94b-21549855ab24","service":"bookings-service","thread":"http-nio-8093-exec-5","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T14:22:46.7609674Z","@version":"1","level":"WARN","message":"Illegal argument exception: No enum constant com.vfsglobal.bookings.entity.Application.ApplicationStatus.CONFIRMED","traceId":"4d1595c7-10d9-4150-b94b-21549855ab24","correlationId":"4d1595c7-10d9-4150-b94b-21549855ab24","service":"bookings-service","thread":"http-nio-8093-exec-5","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T14:23:09.8875638Z","@version":"1","level":"DEBUG","message":"Listing bookings with filters","traceId":"b690e12c-e136-47eb-b79d-a9ee94cdbee4","correlationId":"b690e12c-e136-47eb-b79d-a9ee94cdbee4","service":"bookings-service","thread":"http-nio-8093-exec-7","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T14:23:09.8885833Z","@version":"1","level":"WARN","message":"Illegal argument exception: No enum constant com.vfsglobal.bookings.entity.Application.ApplicationStatus.PAYMENT-PENDING","traceId":"b690e12c-e136-47eb-b79d-a9ee94cdbee4","correlationId":"b690e12c-e136-47eb-b79d-a9ee94cdbee4","service":"bookings-service","thread":"http-nio-8093-exec-7","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T16:28:54.8311703Z","@version":"1","level":"WARN","message":"HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2h46s424ms570s).","service":"bookings-service","thread":"HikariPool-1 housekeeper","logger":"com.zaxxer.hikari.pool.HikariPool"}
{"@timestamp":"2025-12-09T16:31:03.9034211Z","@version":"1","level":"DEBUG","message":"Listing bookings with filters","traceId":"3e9d6932-c123-4954-9cbf-66278e040e31","correlationId":"3e9d6932-c123-4954-9cbf-66278e040e31","service":"bookings-service","thread":"http-nio-8093-exec-9","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T16:31:03.9387895Z","@version":"1","level":"ERROR","message":"Runtime exception occurred","traceId":"3e9d6932-c123-4954-9cbf-66278e040e31","correlationId":"3e9d6932-c123-4954-9cbf-66278e040e31","stack_trace":"org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.query.sqm.UnknownPathException: Could not resolve attribute 'createdAt' of 'com.vfsglobal.bookings.entity.Application' [SELECT a FROM Application a WHERE (:status IS NULL OR a.status = :status) AND (:visaTypeId IS NULL OR a.visaTypeId = :visaTypeId) AND (:startDate IS NULL OR a.createdDate >= :startDate) AND (:endDate IS NULL OR a.createdDate <= :endDate) order by a.createdAt desc]\r\n\tat org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:371)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:246)\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\r\n\tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n\tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy160.findApplicationsWithFilters(Unknown Source)\r\n\tat com.vfsglobal.bookings.service.BookingService.listBookings(BookingService.java:124)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)\r\n\tat com.vfsglobal.bookings.service.BookingService$$SpringCGLIB$$0.listBookings(<generated>)\r\n\tat com.vfsglobal.bookings.controller.BookingController.listBookings(BookingController.java:44)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat com.vfsglobal.bookings.filter.CorrelationIdFilter.doFilterInternal(CorrelationIdFilter.java:58)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: java.lang.IllegalArgumentException: org.hibernate.query.sqm.UnknownPathException: Could not resolve attribute 'createdAt' of 'com.vfsglobal.bookings.entity.Application' [SELECT a FROM Application a WHERE (:status IS NULL OR a.status = :status) AND (:visaTypeId IS NULL OR a.visaTypeId = :visaTypeId) AND (:startDate IS NULL OR a.createdDate >= :startDate) AND (:endDate IS NULL OR a.createdDate <= :endDate) order by a.createdAt desc]\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:143)\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:167)\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:173)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:802)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:707)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:132)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy155.createQuery(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy155.createQuery(Unknown Source)\r\n\tat org.springframework.data.jpa.repository.query.AbstractStringBasedJpaQuery.createJpaQuery(AbstractStringBasedJpaQuery.java:157)\r\n\tat org.springframework.data.jpa.repository.query.AbstractStringBasedJpaQuery.doCreateQuery(AbstractStringBasedJpaQuery.java:99)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.createQuery(AbstractJpaQuery.java:239)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution$PagedExecution.doExecute(JpaQueryExecution.java:202)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n\t... 70 common frames omitted\r\nCaused by: org.hibernate.query.sqm.UnknownPathException: Could not resolve attribute 'createdAt' of 'com.vfsglobal.bookings.entity.Application' [SELECT a FROM Application a WHERE (:status IS NULL OR a.status = :status) AND (:visaTypeId IS NULL OR a.visaTypeId = :visaTypeId) AND (:startDate IS NULL OR a.createdDate >= :startDate) AND (:endDate IS NULL OR a.createdDate <= :endDate) order by a.createdAt desc]\r\n\tat org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:87)\r\n\tat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165)\r\n\tat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:744)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:794)\r\n\t... 99 common frames omitted\r\nCaused by: org.hibernate.query.sqm.PathElementException: Could not resolve attribute 'createdAt' of 'com.vfsglobal.bookings.entity.Application'\r\n\tat org.hibernate.query.sqm.SqmPathSource.getSubPathSource(SqmPathSource.java:95)\r\n\tat org.hibernate.query.sqm.tree.domain.AbstractSqmPath.get(AbstractSqmPath.java:195)\r\n\tat org.hibernate.query.sqm.tree.domain.AbstractSqmFrom.resolvePathPart(AbstractSqmFrom.java:196)\r\n\tat org.hibernate.query.hql.internal.DomainPathPart.resolvePathPart(DomainPathPart.java:42)\r\n\tat org.hibernate.query.hql.internal.BasicDotIdentifierConsumer.consumeIdentifier(BasicDotIdentifierConsumer.java:91)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimplePath(SemanticQueryBuilder.java:5010)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitIndexedPathAccessFragment(SemanticQueryBuilder.java:4959)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitGeneralPathFragment(SemanticQueryBuilder.java:4934)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitGeneralPathExpression(SemanticQueryBuilder.java:1775)\r\n\tat org.hibernate.grammars.hql.HqlParser$GeneralPathExpressionContext.accept(HqlParser.java:7571)\r\n\tat org.antlr.v4.runtime.tree.AbstractParseTreeVisitor.visitChildren(AbstractParseTreeVisitor.java:46)\r\n\tat org.hibernate.grammars.hql.HqlParserBaseVisitor.visitBarePrimaryExpression(HqlParserBaseVisitor.java:755)\r\n\tat org.hibernate.grammars.hql.HqlParser$BarePrimaryExpressionContext.accept(HqlParser.java:7045)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.resolveOrderByOrGroupByExpression(SemanticQueryBuilder.java:1597)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSortExpression(SemanticQueryBuilder.java:1680)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSortSpecification(SemanticQueryBuilder.java:1640)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitOrderByClause(SemanticQueryBuilder.java:1623)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitOrderByClause(SemanticQueryBuilder.java:1612)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQueryOrder(SemanticQueryBuilder.java:1094)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:943)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:268)\r\n\tat org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1844)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:925)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:268)\r\n\tat org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1718)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:442)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:401)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:310)\r\n\tat org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:71)\r\n\t... 103 common frames omitted\r\n","service":"bookings-service","thread":"http-nio-8093-exec-9","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T16:31:31.2835138Z","@version":"1","level":"DEBUG","message":"Listing bookings with filters","traceId":"8e20767b-9b2c-4d98-91fe-542ad88e4f36","correlationId":"8e20767b-9b2c-4d98-91fe-542ad88e4f36","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T16:31:31.2835138Z","@version":"1","level":"WARN","message":"Illegal argument exception: No enum constant com.vfsglobal.bookings.entity.Application.ApplicationStatus.'PAYMENT_PENDING'","traceId":"8e20767b-9b2c-4d98-91fe-542ad88e4f36","correlationId":"8e20767b-9b2c-4d98-91fe-542ad88e4f36","service":"bookings-service","thread":"http-nio-8093-exec-2","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T16:37:09.9232728Z","@version":"1","level":"INFO","message":"Starting BookingsServiceApplication using Java 21.0.6 with PID 16356 (C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service\\target\\classes started by mahalakshmi.gopi in C:\\Users\\mahalakshmi.gopi\\git\\vfs\\visa-backend-services\\bookings-service)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T16:37:09.9301513Z","@version":"1","level":"DEBUG","message":"Running with Spring Boot v3.2.0, Spring v6.1.1","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T16:37:09.9311525Z","@version":"1","level":"INFO","message":"No active profile set, falling back to 1 default profile: \"default\"","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T16:37:10.6725381Z","@version":"1","level":"INFO","message":"Bootstrapping Spring Data JPA repositories in DEFAULT mode.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T16:37:10.7390823Z","@version":"1","level":"INFO","message":"Finished Spring Data repository scanning in 59 ms. Found 8 JPA repository interfaces.","service":"bookings-service","thread":"main","logger":"o.s.d.r.c.RepositoryConfigurationDelegate"}
{"@timestamp":"2025-12-09T16:37:12.0953726Z","@version":"1","level":"INFO","message":"Tomcat initialized with port 8093 (http)","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T16:37:12.104369Z","@version":"1","level":"INFO","message":"Starting service [Tomcat]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardService"}
{"@timestamp":"2025-12-09T16:37:12.104369Z","@version":"1","level":"INFO","message":"Starting Servlet engine: [Apache Tomcat/10.1.16]","service":"bookings-service","thread":"main","logger":"o.a.catalina.core.StandardEngine"}
{"@timestamp":"2025-12-09T16:37:12.1914374Z","@version":"1","level":"INFO","message":"Initializing Spring embedded WebApplicationContext","service":"bookings-service","thread":"main","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T16:37:12.1924226Z","@version":"1","level":"INFO","message":"Root WebApplicationContext: initialization completed in 2211 ms","service":"bookings-service","thread":"main","logger":"o.s.b.w.s.c.ServletWebServerApplicationContext"}
{"@timestamp":"2025-12-09T16:37:12.4280602Z","@version":"1","level":"DEBUG","message":"Filter 'correlationIdFilter' configured for use","service":"bookings-service","thread":"main","logger":"c.v.b.filter.CorrelationIdFilter"}
{"@timestamp":"2025-12-09T16:37:12.687337Z","@version":"1","level":"INFO","message":"HikariPool-1 - Starting...","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T16:37:15.0125232Z","@version":"1","level":"INFO","message":"HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2e62e227","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.pool.HikariPool"}
{"@timestamp":"2025-12-09T16:37:15.013445Z","@version":"1","level":"INFO","message":"HikariPool-1 - Start completed.","service":"bookings-service","thread":"main","logger":"com.zaxxer.hikari.HikariDataSource"}
{"@timestamp":"2025-12-09T16:37:15.2629396Z","@version":"1","level":"INFO","message":"Database: jdbc:postgresql://dpg-d4pe89muk2gs73dcir30-a.singapore-postgres.render.com:5432/vams_c1jg (PostgreSQL 18.1)","service":"bookings-service","thread":"main","logger":"org.flywaydb.core.FlywayExecutor"}
{"@timestamp":"2025-12-09T16:37:16.0511669Z","@version":"1","level":"WARN","message":"Flyway upgrade recommended: PostgreSQL 18.1 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 16.","service":"bookings-service","thread":"main","logger":"o.f.c.i.database.base.Database"}
{"@timestamp":"2025-12-09T16:37:16.5252011Z","@version":"1","level":"INFO","message":"Successfully validated 2 migrations (execution time 00:00.412s)","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbValidate"}
{"@timestamp":"2025-12-09T16:37:17.3557397Z","@version":"1","level":"INFO","message":"Current version of schema \"public\": 1","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T16:37:17.4074075Z","@version":"1","level":"INFO","message":"Schema \"public\" is up to date. No migration necessary.","service":"bookings-service","thread":"main","logger":"o.f.core.internal.command.DbMigrate"}
{"@timestamp":"2025-12-09T16:37:18.0511587Z","@version":"1","level":"INFO","message":"HHH000204: Processing PersistenceUnitInfo [name: default]","service":"bookings-service","thread":"main","logger":"o.h.jpa.internal.util.LogHelper"}
{"@timestamp":"2025-12-09T16:37:18.1091299Z","@version":"1","level":"INFO","message":"HHH000412: Hibernate ORM core version 6.3.1.Final","service":"bookings-service","thread":"main","logger":"org.hibernate.Version"}
{"@timestamp":"2025-12-09T16:37:18.1452285Z","@version":"1","level":"INFO","message":"HHH000026: Second-level cache disabled","service":"bookings-service","thread":"main","logger":"o.h.c.i.RegionFactoryInitiator"}
{"@timestamp":"2025-12-09T16:37:18.3830693Z","@version":"1","level":"INFO","message":"No LoadTimeWeaver setup: ignoring JPA class transformer","service":"bookings-service","thread":"main","logger":"o.s.o.j.p.SpringPersistenceUnitInfo"}
{"@timestamp":"2025-12-09T16:37:18.516522Z","@version":"1","level":"WARN","message":"HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)","service":"bookings-service","thread":"main","logger":"org.hibernate.orm.deprecation"}
{"@timestamp":"2025-12-09T16:37:19.4441833Z","@version":"1","level":"INFO","message":"HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)","service":"bookings-service","thread":"main","logger":"o.h.e.t.j.p.i.JtaPlatformInitiator"}
{"@timestamp":"2025-12-09T16:37:23.0290978Z","@version":"1","level":"INFO","message":"Initialized JPA EntityManagerFactory for persistence unit 'default'","service":"bookings-service","thread":"main","logger":"o.s.o.j.LocalContainerEntityManagerFactoryBean"}
{"@timestamp":"2025-12-09T16:37:23.4411527Z","@version":"1","level":"INFO","message":"Hibernate is in classpath; If applicable, HQL parser will be used.","service":"bookings-service","thread":"main","logger":"o.s.d.j.r.query.QueryEnhancerFactory"}
{"@timestamp":"2025-12-09T16:37:24.3739605Z","@version":"1","level":"WARN","message":"spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning","service":"bookings-service","thread":"main","logger":"o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration"}
{"@timestamp":"2025-12-09T16:37:25.3293502Z","@version":"1","level":"INFO","message":"Exposing 2 endpoint(s) beneath base path '/actuator'","service":"bookings-service","thread":"main","logger":"o.s.b.a.e.web.EndpointLinksResolver"}
{"@timestamp":"2025-12-09T16:37:25.472635Z","@version":"1","level":"INFO","message":"Tomcat started on port 8093 (http) with context path ''","service":"bookings-service","thread":"main","logger":"o.s.b.w.e.tomcat.TomcatWebServer"}
{"@timestamp":"2025-12-09T16:37:25.4903319Z","@version":"1","level":"INFO","message":"Started BookingsServiceApplication in 16.292 seconds (process running for 16.736)","service":"bookings-service","thread":"main","logger":"c.v.b.BookingsServiceApplication"}
{"@timestamp":"2025-12-09T16:37:52.6711583Z","@version":"1","level":"INFO","message":"Initializing Spring DispatcherServlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.a.c.c.C.[Tomcat].[localhost].[/]"}
{"@timestamp":"2025-12-09T16:37:52.6721587Z","@version":"1","level":"INFO","message":"Initializing Servlet 'dispatcherServlet'","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T16:37:52.6741638Z","@version":"1","level":"INFO","message":"Completed initialization in 2 ms","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"o.s.web.servlet.DispatcherServlet"}
{"@timestamp":"2025-12-09T16:37:52.7338185Z","@version":"1","level":"DEBUG","message":"Listing bookings with filters","traceId":"79ef1808-a44c-4781-83d3-f333cee77533","correlationId":"79ef1808-a44c-4781-83d3-f333cee77533","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T16:37:52.7695338Z","@version":"1","level":"ERROR","message":"Runtime exception occurred","traceId":"79ef1808-a44c-4781-83d3-f333cee77533","correlationId":"79ef1808-a44c-4781-83d3-f333cee77533","stack_trace":"org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.query.sqm.UnknownPathException: Could not resolve attribute 'createdAt' of 'com.vfsglobal.bookings.entity.Application' [SELECT a FROM Application a WHERE (:status IS NULL OR a.status = :status) AND (:visaTypeId IS NULL OR a.visaTypeId = :visaTypeId) AND (:startDate IS NULL OR a.createdDate >= :startDate) AND (:endDate IS NULL OR a.createdDate <= :endDate) order by a.createdAt desc]\r\n\tat org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:371)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:246)\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\r\n\tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n\tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:249)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy160.findApplicationsWithFilters(Unknown Source)\r\n\tat com.vfsglobal.bookings.service.BookingService.listBookings(BookingService.java:124)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)\r\n\tat com.vfsglobal.bookings.service.BookingService$$SpringCGLIB$$0.listBookings(<generated>)\r\n\tat com.vfsglobal.bookings.controller.BookingController.listBookings(BookingController.java:44)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat com.vfsglobal.bookings.filter.CorrelationIdFilter.doFilterInternal(CorrelationIdFilter.java:58)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: java.lang.IllegalArgumentException: org.hibernate.query.sqm.UnknownPathException: Could not resolve attribute 'createdAt' of 'com.vfsglobal.bookings.entity.Application' [SELECT a FROM Application a WHERE (:status IS NULL OR a.status = :status) AND (:visaTypeId IS NULL OR a.visaTypeId = :visaTypeId) AND (:startDate IS NULL OR a.createdDate >= :startDate) AND (:endDate IS NULL OR a.createdDate <= :endDate) order by a.createdAt desc]\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:143)\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:167)\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:173)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:802)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:707)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:132)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy155.createQuery(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy155.createQuery(Unknown Source)\r\n\tat org.springframework.data.jpa.repository.query.AbstractStringBasedJpaQuery.createJpaQuery(AbstractStringBasedJpaQuery.java:157)\r\n\tat org.springframework.data.jpa.repository.query.AbstractStringBasedJpaQuery.doCreateQuery(AbstractStringBasedJpaQuery.java:99)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.createQuery(AbstractJpaQuery.java:239)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution$PagedExecution.doExecute(JpaQueryExecution.java:202)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n\t... 70 common frames omitted\r\nCaused by: org.hibernate.query.sqm.UnknownPathException: Could not resolve attribute 'createdAt' of 'com.vfsglobal.bookings.entity.Application' [SELECT a FROM Application a WHERE (:status IS NULL OR a.status = :status) AND (:visaTypeId IS NULL OR a.visaTypeId = :visaTypeId) AND (:startDate IS NULL OR a.createdDate >= :startDate) AND (:endDate IS NULL OR a.createdDate <= :endDate) order by a.createdAt desc]\r\n\tat org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:87)\r\n\tat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165)\r\n\tat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:744)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:794)\r\n\t... 99 common frames omitted\r\nCaused by: org.hibernate.query.sqm.PathElementException: Could not resolve attribute 'createdAt' of 'com.vfsglobal.bookings.entity.Application'\r\n\tat org.hibernate.query.sqm.SqmPathSource.getSubPathSource(SqmPathSource.java:95)\r\n\tat org.hibernate.query.sqm.tree.domain.AbstractSqmPath.get(AbstractSqmPath.java:195)\r\n\tat org.hibernate.query.sqm.tree.domain.AbstractSqmFrom.resolvePathPart(AbstractSqmFrom.java:196)\r\n\tat org.hibernate.query.hql.internal.DomainPathPart.resolvePathPart(DomainPathPart.java:42)\r\n\tat org.hibernate.query.hql.internal.BasicDotIdentifierConsumer.consumeIdentifier(BasicDotIdentifierConsumer.java:91)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimplePath(SemanticQueryBuilder.java:5010)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitIndexedPathAccessFragment(SemanticQueryBuilder.java:4959)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitGeneralPathFragment(SemanticQueryBuilder.java:4934)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitGeneralPathExpression(SemanticQueryBuilder.java:1775)\r\n\tat org.hibernate.grammars.hql.HqlParser$GeneralPathExpressionContext.accept(HqlParser.java:7571)\r\n\tat org.antlr.v4.runtime.tree.AbstractParseTreeVisitor.visitChildren(AbstractParseTreeVisitor.java:46)\r\n\tat org.hibernate.grammars.hql.HqlParserBaseVisitor.visitBarePrimaryExpression(HqlParserBaseVisitor.java:755)\r\n\tat org.hibernate.grammars.hql.HqlParser$BarePrimaryExpressionContext.accept(HqlParser.java:7045)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.resolveOrderByOrGroupByExpression(SemanticQueryBuilder.java:1597)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSortExpression(SemanticQueryBuilder.java:1680)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSortSpecification(SemanticQueryBuilder.java:1640)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitOrderByClause(SemanticQueryBuilder.java:1623)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitOrderByClause(SemanticQueryBuilder.java:1612)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQueryOrder(SemanticQueryBuilder.java:1094)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:943)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:268)\r\n\tat org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1844)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:925)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:268)\r\n\tat org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1718)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:442)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:401)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:310)\r\n\tat org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:71)\r\n\t... 103 common frames omitted\r\n","service":"bookings-service","thread":"http-nio-8093-exec-1","logger":"c.v.b.e.GlobalExceptionHandler"}
{"@timestamp":"2025-12-09T16:38:08.6949438Z","@version":"1","level":"DEBUG","message":"Listing bookings with filters","traceId":"e43927ab-9db1-4618-98eb-cc4f6de0bb64","correlationId":"e43927ab-9db1-4618-98eb-cc4f6de0bb64","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"c.v.b.controller.BookingController"}
{"@timestamp":"2025-12-09T16:38:08.6969448Z","@version":"1","level":"WARN","message":"Illegal argument exception: No enum constant com.vfsglobal.bookings.entity.Application.ApplicationStatus.'PAYMENT_PENDING'","traceId":"e43927ab-9db1-4618-98eb-cc4f6de0bb64","correlationId":"e43927ab-9db1-4618-98eb-cc4f6de0bb64","service":"bookings-service","thread":"http-nio-8093-exec-4","logger":"c.v.b.e.GlobalExceptionHandler"}
